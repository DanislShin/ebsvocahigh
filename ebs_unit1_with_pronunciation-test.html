<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>EBS ÌïÑÏàò ÏòÅÎã®Ïñ¥ Unit 1 with Pronunciation Practice</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
      }
      .container {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        max-width: 1200px;
        margin: 0 auto;
      }
      h1 {
        text-align: center;
        color: #4a5568;
        margin-bottom: 30px;
        font-size: 2.5em;
        background: linear-gradient(45deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .microphone-notice {
        background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        padding: 15px;
        text-align: center;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      .microphone-notice button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1em;
        transition: transform 0.2s;
      }
      .microphone-notice button:hover {
        transform: translateY(-2px);
      }
      .stats {
        display: flex;
        justify-content: space-around;
        margin: 20px 0;
        text-align: center;
      }
      .stat-item {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        min-width: 120px;
      }
      .stat-item h3 {
        margin: 0 0 10px 0;
        color: #4a5568;
      }
      .stat-item p {
        margin: 0;
        font-size: 1.5em;
        font-weight: bold;
        color: #2d3748;
      }
      .controls {
        text-align: center;
        margin: 20px 0;
      }
      .controls button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 0 10px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1em;
        transition: transform 0.2s;
      }
      .controls button:hover {
        transform: translateY(-2px);
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      th,
      td {
        border: 1px solid #e2e8f0;
        padding: 12px;
        text-align: left;
      }
      th {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-weight: bold;
      }
      tr:nth-child(even) {
        background: #f8f9fa;
      }
      .word-cell {
        font-weight: bold;
        font-size: 1.1em;
        color: #2d3748;
      }
      .ipa-cell {
        font-family: "Courier New", monospace;
        color: #e53e3e;
      }
      .meaning-cell {
        color: #2b6cb0;
      }
      .example-cell {
        font-style: italic;
        color: #4a5568;
      }
      .translation-cell {
        color: #38a169;
      }
      .practice-cell {
        text-align: center;
      }
      .practice-btn {
        background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        color: white;
        border: none;
        padding: 6px 12px;
        margin: 2px;
        border-radius: 15px;
        cursor: pointer;
        font-size: 0.9em;
        transition: transform 0.2s;
      }
      .practice-btn:hover {
        transform: scale(1.05);
      }
      .record-btn {
        background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
      }
      .feedback {
        display: block;
        margin-top: 5px;
        font-size: 0.8em;
        font-weight: bold;
        min-height: 40px;
        padding: 5px;
        border-radius: 5px;
        background: #f8f9fa;
      }
      .feedback.success {
        color: #38a169;
        background: #e6fffa;
        border: 1px solid #38a169;
      }
      .feedback.error {
        color: #e53e3e;
        background: #fed7d7;
        border: 1px solid #e53e3e;
      }
      .feedback.warning {
        color: #d69e2e;
        background: #fefcbf;
        border: 1px solid #d69e2e;
      }
      .speech-comparison {
        margin-top: 8px;
        padding: 8px;
        background: #f7fafc;
        border-radius: 5px;
        border: 1px solid #e2e8f0;
        font-size: 0.75em;
      }
      .target-text {
        color: #2d3748;
        font-weight: bold;
        margin-bottom: 4px;
      }
      .spoken-text {
        color: #4a5568;
        margin-bottom: 4px;
      }
      .word-match {
        display: inline-block;
        padding: 2px 4px;
        margin: 1px;
        border-radius: 3px;
      }
      .word-correct {
        background: #c6f6d5;
        color: #22543d;
      }
      .word-incorrect {
        background: #fed7d7;
        color: #742a2a;
      }
      .word-missing {
        background: #fbb6ce;
        color: #702459;
      }
      .word-extra {
        background: #feebc8;
        color: #7b341e;
      }
      .speaker-icon {
        cursor: pointer;
        color: #4299e1;
        font-size: 1.2em;
      }
      .speaker-icon:hover {
        color: #2b6cb0;
      }
      .recording {
        background: linear-gradient(135deg, #fc8181 0%, #e53e3e 100%);
        animation: pulse 1s infinite;
      }
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }
      .progress-bar {
        width: 100%;
        height: 4px;
        background: #e2e8f0;
        border-radius: 2px;
        overflow: hidden;
        margin-top: 10px;
      }
      .progress-fill {
        height: 100%;
        background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        width: 0%;
        transition: width 0.3s ease;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>EBS ÌïÑÏàò ÏòÅÎã®Ïñ¥ Unit 1 with Pronunciation Practice</h1>

      <div class="microphone-notice" id="microphoneNotice">
        <h2>üé§ Microphone Access Required</h2>
        <p>
          Please allow microphone access for voice recording and recognition
          features.
        </p>
        <button onclick="requestMicrophone()">Allow Microphone Access</button>
        <p>
          ‚Äª Voice data is not stored on any server and is processed only in your
          browser.
        </p>
      </div>

      <div class="stats">
        <div class="stat-item">
          <h3>Words Practiced</h3>
          <p id="wordsPracticed">0</p>
        </div>
        <div class="stat-item">
          <h3>Average Accuracy</h3>
          <p id="averageAccuracy">0%</p>
        </div>
        <div class="stat-item">
          <h3>90%+ Accuracy</h3>
          <p id="highAccuracy">0</p>
        </div>
      </div>

      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>

      <div class="controls">
        <button onclick="downloadRecordings()">
          üì• Download All Recordings
        </button>
        <button onclick="resetProgress()">üîÑ Reset Progress</button>
        <button onclick="toggleAutoPlay()" id="autoPlayBtn">
          üîä Auto Play: OFF
        </button>
        <button onclick="generateReport()">üìä Generate Report</button>
      </div>

      <table>
        <tr>
          <th>Word</th>
          <th>IPA</th>
          <th>Part of Speech</th>
          <th>Meaning</th>
          <th>Example Sentence</th>
          <th>Translation</th>
          <th>IPA (Example)</th>
          <th>Practice</th>
        </tr>
        <tr>
          <td class="word-cell">
            abandon
            <span class="speaker-icon" onclick="playWord('abandon')">üîä</span>
          </td>
          <td class="ipa-cell">/…ôÀàb√¶nd…ôn/</td>
          <td>Verb</td>
          <td class="meaning-cell">Î≤ÑÎ¶¨Îã§, Îã®ÎÖêÌïòÎã§</td>
          <td class="example-cell">
            They abandoned the car and ran away.
            <span class="speaker-icon" onclick="playSentence('abandon')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">Í∑∏Îì§ÏùÄ Ï∞®Î•º Î≤ÑÎ¶¨Í≥† Îã¨ÏïÑÎÇ¨Îã§.</td>
          <td class="ipa-cell">/√∞e…™ …ôÀàb√¶nd…ônd √∞…ô k…ëÀêr √¶nd r√¶n …ôÀàwe…™/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abandon')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abandon')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abandon')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abandon')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-abandon"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abolish
            <span class="speaker-icon" onclick="playWord('abolish')">üîä</span>
          </td>
          <td class="ipa-cell">/…ôÀàb…ël…™ É/</td>
          <td>Verb</td>
          <td class="meaning-cell">ÌèêÏßÄÌïòÎã§</td>
          <td class="example-cell">
            He is in favor of abolishing the death penalty.
            <span class="speaker-icon" onclick="playSentence('abolish')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Í∑∏Îäî ÏÇ¨ÌòïÏ†úÎ•º ÌèêÏßÄÌïòÎäî Í≤ÉÏóê Ï∞¨ÏÑ±ÌïúÎã§.
          </td>
          <td class="ipa-cell">
            /hi …™z …™n Ààfe…™v…ôr …ôv …ôÀàb…ël…™ É…™≈ã √∞…ô d…õŒ∏ Ààp…õn…ôlti/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abolish')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abolish')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abolish')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abolish')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-abolish"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abroad
            <span class="speaker-icon" onclick="playWord('abroad')">üîä</span>
          </td>
          <td class="ipa-cell">/…ôÀàbr…îÀêd/</td>
          <td>Adverb</td>
          <td class="meaning-cell">Ìï¥Ïô∏ÏóêÏÑú, Ïô∏Íµ≠ÏóêÏÑú</td>
          <td class="example-cell">
            He hopes to work abroad next year.
            <span class="speaker-icon" onclick="playSentence('abroad')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Í∑∏Îäî ÎÇ¥ÎÖÑÏóê Ìï¥Ïô∏ÏóêÏÑú Í∑ºÎ¨¥ÌïòÍ∏∏ Ìù¨ÎßùÌïúÎã§.
          </td>
          <td class="ipa-cell">/hi ho äps t…ô w…úÀêrk …ôÀàbr…îÀêd n…õkst j…™r/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abroad')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abroad')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abroad')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abroad')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-abroad"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abruptly
            <span class="speaker-icon" onclick="playWord('abruptly')">üîä</span>
          </td>
          <td class="ipa-cell">/…ôÀàbr åptli/</td>
          <td>Adverb</td>
          <td class="meaning-cell">Í∞ëÏûëÏä§ÎüΩÍ≤å</td>
          <td class="example-cell">
            The land dropped off abruptly.
            <span class="speaker-icon" onclick="playSentence('abruptly')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">ÎïÖÏù¥ Í∞ëÏûêÍ∏∞ Ìëπ Í∫ºÏ°åÎã§.</td>
          <td class="ipa-cell">/√∞…ô l√¶nd dr…ëÀêpt …îÀêf …ôÀàbr åptli/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abruptly')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abruptly')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abruptly')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abruptly')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-abruptly"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            absence
            <span class="speaker-icon" onclick="playWord('absence')">üîä</span>
          </td>
          <td class="ipa-cell">/Àà√¶bs…ôns/</td>
          <td>Noun</td>
          <td class="meaning-cell">Í≤∞ÏÑù, Í≤∞Í∑º, Î∂ÄÏû¨</td>
          <td class="example-cell">
            Mark will be in charge in my absence.
            <span class="speaker-icon" onclick="playSentence('absence')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            ÎÇ¥Í∞Ä ÏóÜÎäî ÎèôÏïà MarkÍ∞Ä Ï±ÖÏûÑÏùÑ Îß°ÏùÑ Í≤ÉÏù¥Îã§.
          </td>
          <td class="ipa-cell">/m…ëÀêrk w…™l bi …™n t É…ëÀêrd í …™n ma…™ Àà√¶bs…ôns/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('absence')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('absence')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('absence')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('absence')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-absence"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            absolutely
            <span class="speaker-icon" onclick="playWord('absolutely')"
              >üîä</span
            >
          </td>
          <td class="ipa-cell">/Àå√¶bs…ôÀàluÀêtli/</td>
          <td>Adverb</td>
          <td class="meaning-cell">Ï†àÎåÄÏ†ÅÏúºÎ°ú, Ï†ÑÌòÄ</td>
          <td class="example-cell">
            He has absolutely no experience in this field.
            <span class="speaker-icon" onclick="playSentence('absolutely')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">Í∑∏Îäî Ïù¥ Î∂ÑÏïºÏóê Ï†ÑÌòÄ Í≤ΩÌóòÏù¥ ÏóÜÎã§.</td>
          <td class="ipa-cell">
            /hi h√¶z Àå√¶bs…ôÀàluÀêtli no ä …™kÀàsp…™ri…ôns …™n √∞…™s fiÀêld/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('absolutely')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('absolutely')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('absolutely')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('absolutely')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-absolutely"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            absorb
            <span class="speaker-icon" onclick="playWord('absorb')">üîä</span>
          </td>
          <td class="ipa-cell">/…ôbÀàz…îÀêrb/</td>
          <td>Verb</td>
          <td class="meaning-cell">Ìù°ÏàòÌïòÎã§</td>
          <td class="example-cell">
            Plant roots absorb moisture.
            <span class="speaker-icon" onclick="playSentence('absorb')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">ÏãùÎ¨ºÏùò ÎøåÎ¶¨Îäî ÏàòÎ∂ÑÏùÑ Ìù°ÏàòÌïúÎã§.</td>
          <td class="ipa-cell">/pl√¶nt ruÀêts …ôbÀàz…îÀêrb Ààm…î…™st É…ôr/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('absorb')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('absorb')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('absorb')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('absorb')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-absorb"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abstract
            <span class="speaker-icon" onclick="playWord('abstract')">üîä</span>
          </td>
          <td class="ipa-cell">/Àà√¶bstr√¶kt/</td>
          <td>Adjective</td>
          <td class="meaning-cell">Ï∂îÏÉÅÏ†ÅÏù∏</td>
          <td class="example-cell">
            Human beings are capable of abstract thought.
            <span class="speaker-icon" onclick="playSentence('abstract')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">Ïù∏Í∞ÑÏùÄ Ï∂îÏÉÅÏ†Å ÏÇ¨Í≥†Î•º Ìï† Ïàò ÏûàÎã§.</td>
          <td class="ipa-cell">
            /ÀàhjuÀêm…ôn ÀàbiÀê…™≈ãz …ëÀêr Ààke…™p…ôbl …ôv Àà√¶bstr√¶kt Œ∏…îÀêt/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abstract')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abstract')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abstract')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abstract')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-abstract"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abundant
            <span class="speaker-icon" onclick="playWord('abundant')">üîä</span>
          </td>
          <td class="ipa-cell">/…ôÀàb ånd…ônt/</td>
          <td>Adjective</td>
          <td class="meaning-cell">ÌíçÎ∂ÄÌïú</td>
          <td class="example-cell">
            Rainfall is abundant in the region.
            <span class="speaker-icon" onclick="playSentence('abundant')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">Í∑∏ ÏßÄÏó≠ÏùÄ Í∞ïÏàòÎüâÏù¥ ÌíçÎ∂ÄÌïòÎã§.</td>
          <td class="ipa-cell">/Ààre…™nf…îÀêl …™z …ôÀàb ånd…ônt …™n √∞…ô ÀàriÀêd í…ôn/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abundant')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abundant')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abundant')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abundant')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-abundant"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abuse
            <span class="speaker-icon" onclick="playWord('abuse')">üîä</span>
          </td>
          <td class="ipa-cell">/…ôÀàbjuÀês/ (Î™ÖÏÇ¨) /…ôbÀàjuÀêz/ (ÎèôÏÇ¨)</td>
          <td>Noun</td>
          <td class="meaning-cell">ÌïôÎåÄ, ÎÇ®Ïö©</td>
          <td class="example-cell">
            The boy was a victim of abuse.
            <span class="speaker-icon" onclick="playSentence('abuse')">üîä</span>
          </td>
          <td class="translation-cell">Í∑∏ ÏÜåÎÖÑÏùÄ ÌïôÎåÄÏùò ÌîºÌï¥ÏûêÏòÄÎã§.</td>
          <td class="ipa-cell">/√∞…ô b…î…™ w…ôz …ô Ààv…™kt…™m …ôv …ôÀàbjuÀês/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abuse')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abuse')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abuse')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abuse')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-abuse"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accelerate
            <span class="speaker-icon" onclick="playWord('accelerate')"
              >üîä</span
            >
          </td>
          <td class="ipa-cell">/…ôkÀàsel…ôre…™t/</td>
          <td>Verb</td>
          <td class="meaning-cell">Í∞ÄÏÜçÌïòÎã§</td>
          <td class="example-cell">
            The car accelerated to a speed of 80 miles per hour.
            <span class="speaker-icon" onclick="playSentence('accelerate')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Í∑∏ Ï∞®Îäî ÏãúÏÜç 80ÎßàÏùºÍπåÏßÄ ÏÜçÎèÑÎ•º ÎÜíÏòÄÎã§.
          </td>
          <td class="ipa-cell">
            /√∞…ô k…ëÀêr …ôkÀàsel…ôre…™t…™d t…ô …ô spiÀêd …ôv Ààe…™ti ma…™lz p…ôr a ä…ôr/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accelerate')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accelerate')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accelerate')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accelerate')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-accelerate"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accept
            <span class="speaker-icon" onclick="playWord('accept')">üîä</span>
          </td>
          <td class="ipa-cell">/…ôkÀàsept/</td>
          <td>Verb</td>
          <td class="meaning-cell">Î∞õÏïÑÎì§Ïù¥Îã§, ÏàòÏö©ÌïòÎã§</td>
          <td class="example-cell">
            They offered me a job and I accepted it.
            <span class="speaker-icon" onclick="playSentence('accept')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Í∑∏Îì§ÏùÄ ÎÇ¥Í≤å ÏùºÏûêÎ¶¨Î•º Ï†úÍ≥µÌñàÍ≥†, ÎÇòÎäî Í∑∏Í≤ÉÏùÑ ÏàòÏö©ÌñàÎã§.
          </td>
          <td class="ipa-cell">/√∞e…™ Àà…îÀêf…ôrd mi …ô d í…ëÀêb √¶nd a…™ …ôkÀàsept…™d …™t/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accept')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accept')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accept')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accept')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-accept"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            access
            <span class="speaker-icon" onclick="playWord('access')">üîä</span>
          </td>
          <td class="ipa-cell">/Àà√¶kses/</td>
          <td>Noun</td>
          <td class="meaning-cell">Ï†ëÏÜç, ÏûÖÏû•</td>
          <td class="example-cell">
            We have Internet access at the library.
            <span class="speaker-icon" onclick="playSentence('access')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Ïö∞Î¶¨Îäî ÎèÑÏÑúÍ¥ÄÏóêÏÑú Ïù∏ÌÑ∞ÎÑ∑Ïóê Ï†ëÏÜçÌï† Ïàò ÏûàÎã§.
          </td>
          <td class="ipa-cell">/wi h√¶v Àà…™nt…ôrÀån…õt Àà√¶kses √¶t √∞…ô Ààla…™br…õri/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('access')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('access')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('access')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('access')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-access"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accidentally
            <span class="speaker-icon" onclick="playWord('accidentally')"
              >üîä</span
            >
          </td>
          <td class="ipa-cell">/Àå√¶ks…ôÀàdent…ôli/</td>
          <td>Adverb</td>
          <td class="meaning-cell">Ïö∞Ïó∞Ìûà, Ïã§ÏàòÎ°ú</td>
          <td class="example-cell">
            They believe that the fire was started accidentally.
            <span class="speaker-icon" onclick="playSentence('accidentally')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Í∑∏ ÌôîÏû¨Îäî Ïö∞Î∞úÏ†ÅÏúºÎ°ú ÏãúÏûëÎêú Í≤ÉÏúºÎ°ú ÎØøÍ≥† ÏûàÎã§.
          </td>
          <td class="ipa-cell">
            /√∞e…™ b…™ÀàliÀêv √∞√¶t √∞…ô fa…™…ôr w…ôz Ààst…ëÀêrt…™d Àå√¶ks…ôÀàdent…ôli/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accidentally')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accidentally')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accidentally')">
              üó£Ô∏è Check Word</button
            ><br />
            <button
              class="practice-btn"
              onclick="checkSentence('accidentally')"
            >
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-accidentally"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accommodate
            <span class="speaker-icon" onclick="playWord('accommodate')"
              >üîä</span
            >
          </td>
          <td class="ipa-cell">/…ôÀàk…ëÀêm…ôde…™t/</td>
          <td>Verb</td>
          <td class="meaning-cell">ÏàòÏö©ÌïòÎã§</td>
          <td class="example-cell">
            The hotel can only accommodate about 100 people.
            <span class="speaker-icon" onclick="playSentence('accommodate')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Í∑∏ Ìò∏ÌÖîÏùÄ Í≤®Ïö∞ 100Î™Ö Ï†ïÎèÑÎßå ÏàòÏö©Ìï† Ïàò ÏûàÎã§.
          </td>
          <td class="ipa-cell">
            /√∞…ô ho äÀàt…õl k√¶n Àào änli …ôÀàk…ëÀêm…ôde…™t …ôÀàba ät w ån Ààh åndr…ôd ÀàpiÀêpl/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accommodate')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accommodate')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accommodate')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accommodate')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-accommodate"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accompany
            <span class="speaker-icon" onclick="playWord('accompany')">üîä</span>
          </td>
          <td class="ipa-cell">/…ôÀàk åmp…ôni/</td>
          <td>Verb</td>
          <td class="meaning-cell">ÎèôÌñâÌïòÎã§</td>
          <td class="example-cell">
            I want you to accompany her.
            <span class="speaker-icon" onclick="playSentence('accompany')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">ÎÇú ÎÑ§Í∞Ä Í∑∏ÎÖÄÏôÄ Ìï®Íªò Í∞ÄÍ∏∏ Î∞îÎûÄÎã§.</td>
          <td class="ipa-cell">/a…™ w…ëÀênt ju t…ô …ôÀàk åmp…ôni h…ôr/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accompany')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accompany')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accompany')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accompany')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-accompany"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accomplish
            <span class="speaker-icon" onclick="playWord('accomplish')"
              >üîä</span
            >
          </td>
          <td class="ipa-cell">/…ôÀàk…ëÀêmpl…™ É/</td>
          <td>Verb</td>
          <td class="meaning-cell">Îã¨ÏÑ±ÌïòÎã§</td>
          <td class="example-cell">
            We have accomplished much in a short period of time.
            <span class="speaker-icon" onclick="playSentence('accomplish')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Ïö∞Î¶¨Îäî ÏßßÏùÄ ÏãúÍ∞ÑÏóê ÎßéÏùÄ Í≤ÉÏùÑ Ïù¥Î£®ÏóàÎã§.
          </td>
          <td class="ipa-cell">
            /wi h√¶v …ôÀàk…ëÀêmpl…™ Ét m åt É …™n …ô  É…îÀêrt Ààp…™ri…ôd …ôv ta…™m/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accomplish')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accomplish')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accomplish')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accomplish')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-accomplish"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            according to
            <span class="speaker-icon" onclick="playWord('according to')"
              >üîä</span
            >
          </td>
          <td class="ipa-cell">/…ôÀàk…îÀêrd…™≈ã tuÀê/</td>
          <td>Preposition</td>
          <td class="meaning-cell">~Ïóê Îî∞Î•¥Î©¥</td>
          <td class="example-cell">
            According to the law, we had to pay a small fine.
            <span class="speaker-icon" onclick="playSentence('according to')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">Î≤ïÏóê Îî∞Îùº Ïö∞Î¶¨Îäî Î≤åÍ∏àÏùÑ ÎÇ¥Ïïº ÌñàÎã§.</td>
          <td class="ipa-cell">
            /…ôÀàk…îÀêrd…™≈ã t…ô √∞…ô l…îÀê wi h√¶d t…ô pe…™ …ô sm…îÀêl fa…™n/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('according to')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('according to')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('according to')">
              üó£Ô∏è Check Word</button
            ><br />
            <button
              class="practice-btn"
              onclick="checkSentence('according to')"
            >
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-according to"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accordingly
            <span class="speaker-icon" onclick="playWord('accordingly')"
              >üîä</span
            >
          </td>
          <td class="ipa-cell">/…ôÀàk…îÀêrd…™≈ãli/</td>
          <td>Adverb</td>
          <td class="meaning-cell">Îî∞ÎùºÏÑú</td>
          <td class="example-cell">
            No complaint was made. Accordingly, they took no action.
            <span class="speaker-icon" onclick="playSentence('accordingly')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Î∂àÌèâÏù¥ ÏóÜÏóàÍ∏∞Ïóê, Í∑∏Îì§ÏùÄ ÏïÑÎ¨¥ Ï°∞ÏπòÎèÑ Ï∑®ÌïòÏßÄ ÏïäÏïòÎã§.
          </td>
          <td class="ipa-cell">
            /no ä k…ômÀàple…™nt w…ôz me…™d …ôÀàk…îÀêrd…™≈ãli √∞e…™ t äk no ä Àà√¶k É…ôn/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accordingly')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accordingly')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accordingly')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accordingly')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-accordingly"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            account for
            <span class="speaker-icon" onclick="playWord('account for')"
              >üîä</span
            >
          </td>
          <td class="ipa-cell">/…ôÀàka änt f…îÀêr/</td>
          <td>Verb</td>
          <td class="meaning-cell">~Î•º Ï∞®ÏßÄÌïòÎã§, ÏÑ§Î™ÖÌïòÎã§</td>
          <td class="example-cell">
            African-Americans account for about 13% of the US population.
            <span class="speaker-icon" onclick="playSentence('account for')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            ÌùëÏù∏ÏùÄ ÎØ∏Íµ≠ Ïù∏Íµ¨Ïùò ÏïΩ 13%Î•º Ï∞®ÏßÄÌïúÎã§.
          </td>
          <td class="ipa-cell">
            /Àå√¶fr…™k…ôn …ôÀàm…õr…™k…ônz …ôÀàka änt f…ôr …ôÀàba ät ÀåŒ∏…úÀêrÀàtiÀên p…ôrÀàs…õnt …ôv √∞…ô
            juÀà…õs p…ëÀêpj…ôÀàle…™ É…ôn/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('account for')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('account for')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('account for')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('account for')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-account for"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            account
            <span class="speaker-icon" onclick="playWord('account')">üîä</span>
          </td>
          <td class="ipa-cell">/…ôÀàka änt/</td>
          <td>Noun</td>
          <td class="meaning-cell">ÏÑ§Î™Ö, Ïù¥ÏïºÍ∏∞, Í≥ÑÏ¢å</td>
          <td class="example-cell">
            He gave a brief account of what had happened.
            <span class="speaker-icon" onclick="playSentence('account')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Í∑∏Îäî Î¨¥Ïä® ÏùºÏù¥ ÏûàÏóàÎäîÏßÄ Í∞ÑÎã®Ìûà ÏÑ§Î™ÖÌñàÎã§.
          </td>
          <td class="ipa-cell">/hi ge…™v …ô briÀêf …ôÀàka änt …ôv w åt h√¶d Ààh√¶p…ônd/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('account')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('account')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('account')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('account')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-account"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accountable
            <span class="speaker-icon" onclick="playWord('accountable')"
              >üîä</span
            >
          </td>
          <td class="ipa-cell">/…ôÀàka änt…ôbl/</td>
          <td>Adjective</td>
          <td class="meaning-cell">Ï±ÖÏûÑÏù¥ ÏûàÎäî</td>
          <td class="example-cell">
            Managers must be accountable for their decisions.
            <span class="speaker-icon" onclick="playSentence('accountable')"
              >üîä</span
            >
          </td>
          <td class="translation-cell">
            Í¥ÄÎ¶¨ÏûêÎì§ÏùÄ Í∑∏Îì§Ïùò Í≤∞Ï†ïÏóê Ï±ÖÏûÑÏùÑ Ï†∏Ïïº ÌïúÎã§.
          </td>
          <td class="ipa-cell">
            /Ààm√¶n…™d í…ôrz m åst bi …ôÀàka änt…ôbl f…ôr √∞…õr d…™Ààs…™ í…ônz/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accountable')">
              ‚ñ∂Ô∏è Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accountable')"
            >
              üéôÔ∏è Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accountable')">
              üó£Ô∏è Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accountable')">
              üó£Ô∏è Check Sentence
            </button>
            <span class="feedback" id="feedback-accountable"></span>
          </td>
        </tr>
      </table>
    </div>

    <script>
      // Ï†ÑÏó≠ Î≥ÄÏàò
      let mediaRecorder;
      let audioChunks = [];
      let isRecording = false;
      let microphoneGranted = false;
      let autoPlay = false;
      let recordings = {};
      let stats = {
        wordsPracticed: 0,
        totalAccuracy: 0,
        highAccuracyCount: 0,
      };

      // ÏùåÏÑ± Ìï©ÏÑ± ÏÑ§Ï†ï
      const synth = window.speechSynthesis;
      let voices = [];

      // Îã®Ïñ¥ Îç∞Ïù¥ÌÑ∞
      const wordData = {
        abandon: {
          word: "abandon",
          ipa: "/…ôÀàb√¶nd…ôn/",
          sentence: "They abandoned the car and ran away.",
          sentenceIPA: "/√∞e…™ …ôÀàb√¶nd…ônd √∞…ô k…ëÀêr √¶nd r√¶n …ôÀàwe…™/",
        },
        abolish: {
          word: "abolish",
          ipa: "/…ôÀàb…ël…™ É/",
          sentence: "He is in favor of abolishing the death penalty.",
          sentenceIPA: "/hi …™z …™n Ààfe…™v…ôr …ôv …ôÀàb…ël…™ É…™≈ã √∞…ô d…õŒ∏ Ààp…õn…ôlti/",
        },
        abroad: {
          word: "abroad",
          ipa: "/…ôÀàbr…îÀêd/",
          sentence: "He hopes to work abroad next year.",
          sentenceIPA: "/hi ho äps t…ô w…úÀêrk …ôÀàbr…îÀêd n…õkst j…™r/",
        },
        abruptly: {
          word: "abruptly",
          ipa: "/…ôÀàbr åptli/",
          sentence: "The land dropped off abruptly.",
          sentenceIPA: "/√∞…ô l√¶nd dr…ëÀêpt …îÀêf …ôÀàbr åptli/",
        },
        absence: {
          word: "absence",
          ipa: "/Àà√¶bs…ôns/",
          sentence: "Mark will be in charge in my absence.",
          sentenceIPA: "/m…ëÀêrk w…™l bi …™n t É…ëÀêrd í …™n ma…™ Àà√¶bs…ôns/",
        },
        absolutely: {
          word: "absolutely",
          ipa: "/Àå√¶bs…ôÀàluÀêtli/",
          sentence: "He has absolutely no experience in this field.",
          sentenceIPA: "/hi h√¶z Àå√¶bs…ôÀàluÀêtli no ä …™kÀàsp…™ri…ôns …™n √∞…™s fiÀêld/",
        },
        absorb: {
          word: "absorb",
          ipa: "/…ôbÀàz…îÀêrb/",
          sentence: "Plant roots absorb moisture.",
          sentenceIPA: "/pl√¶nt ruÀêts …ôbÀàz…îÀêrb Ààm…î…™st É…ôr/",
        },
        abstract: {
          word: "abstract",
          ipa: "/Àà√¶bstr√¶kt/",
          sentence: "Human beings are capable of abstract thought.",
          sentenceIPA: "/ÀàhjuÀêm…ôn ÀàbiÀê…™≈ãz …ëÀêr Ààke…™p…ôbl …ôv Àà√¶bstr√¶kt Œ∏…îÀêt/",
        },
        abundant: {
          word: "abundant",
          ipa: "/…ôÀàb ånd…ônt/",
          sentence: "Rainfall is abundant in the region.",
          sentenceIPA: "/Ààre…™nf…îÀêl …™z …ôÀàb ånd…ônt …™n √∞…ô ÀàriÀêd í…ôn/",
        },
        abuse: {
          word: "abuse",
          ipa: "/…ôÀàbjuÀês/",
          sentence: "The boy was a victim of abuse.",
          sentenceIPA: "/√∞…ô b…î…™ w…ôz …ô Ààv…™kt…™m …ôv …ôÀàbjuÀês/",
        },
        accelerate: {
          word: "accelerate",
          ipa: "/…ôkÀàsel…ôre…™t/",
          sentence: "The car accelerated to a speed of 80 miles per hour.",
          sentenceIPA:
            "/√∞…ô k…ëÀêr …ôkÀàsel…ôre…™t…™d t…ô …ô spiÀêd …ôv Ààe…™ti ma…™lz p…ôr a ä…ôr/",
        },
        accept: {
          word: "accept",
          ipa: "/…ôkÀàsept/",
          sentence: "They offered me a job and I accepted it.",
          sentenceIPA: "/√∞e…™ Àà…îÀêf…ôrd mi …ô d í…ëÀêb √¶nd a…™ …ôkÀàsept…™d …™t/",
        },
        access: {
          word: "access",
          ipa: "/Àà√¶kses/",
          sentence: "We have Internet access at the library.",
          sentenceIPA: "/wi h√¶v Àà…™nt…ôrÀån…õt Àà√¶kses √¶t √∞…ô Ààla…™br…õri/",
        },
        accidentally: {
          word: "accidentally",
          ipa: "/Àå√¶ks…ôÀàdent…ôli/",
          sentence: "They believe that the fire was started accidentally.",
          sentenceIPA: "/√∞e…™ b…™ÀàliÀêv √∞√¶t √∞…ô fa…™…ôr w…ôz Ààst…ëÀêrt…™d Àå√¶ks…ôÀàdent…ôli/",
        },
        accommodate: {
          word: "accommodate",
          ipa: "/…ôÀàk…ëÀêm…ôde…™t/",
          sentence: "The hotel can only accommodate about 100 people.",
          sentenceIPA:
            "/√∞…ô ho äÀàt…õl k√¶n Àào änli …ôÀàk…ëÀêm…ôde…™t …ôÀàba ät w ån Ààh åndr…ôd ÀàpiÀêpl/",
        },
        accompany: {
          word: "accompany",
          ipa: "/…ôÀàk åmp…ôni/",
          sentence: "I want you to accompany her.",
          sentenceIPA: "/a…™ w…ëÀênt ju t…ô …ôÀàk åmp…ôni h…ôr/",
        },
        accomplish: {
          word: "accomplish",
          ipa: "/…ôÀàk…ëÀêmpl…™ É/",
          sentence: "We have accomplished much in a short period of time.",
          sentenceIPA: "/wi h√¶v …ôÀàk…ëÀêmpl…™ Ét m åt É …™n …ô  É…îÀêrt Ààp…™ri…ôd …ôv ta…™m/",
        },
        "according to": {
          word: "according to",
          ipa: "/…ôÀàk…îÀêrd…™≈ã tuÀê/",
          sentence: "According to the law, we had to pay a small fine.",
          sentenceIPA: "/…ôÀàk…îÀêrd…™≈ã t…ô √∞…ô l…îÀê wi h√¶d t…ô pe…™ …ô sm…îÀêl fa…™n/",
        },
        accordingly: {
          word: "accordingly",
          ipa: "/…ôÀàk…îÀêrd…™≈ãli/",
          sentence: "No complaint was made. Accordingly, they took no action.",
          sentenceIPA:
            "/no ä k…ômÀàple…™nt w…ôz me…™d …ôÀàk…îÀêrd…™≈ãli √∞e…™ t äk no ä Àà√¶k É…ôn/",
        },
        "account for": {
          word: "account for",
          ipa: "/…ôÀàka änt f…îÀêr/",
          sentence:
            "African-Americans account for about 13% of the US population.",
          sentenceIPA:
            "/Àå√¶fr…™k…ôn …ôÀàm…õr…™k…ônz …ôÀàka änt f…ôr …ôÀàba ät ÀåŒ∏…úÀêrÀàtiÀên p…ôrÀàs…õnt …ôv √∞…ô juÀà…õs p…ëÀêpj…ôÀàle…™ É…ôn/",
        },
        account: {
          word: "account",
          ipa: "/…ôÀàka änt/",
          sentence: "He gave a brief account of what had happened.",
          sentenceIPA: "/hi ge…™v …ô briÀêf …ôÀàka änt …ôv w åt h√¶d Ààh√¶p…ônd/",
        },
        accountable: {
          word: "accountable",
          ipa: "/…ôÀàka änt…ôbl/",
          sentence: "Managers must be accountable for their decisions.",
          sentenceIPA: "/Ààm√¶n…™d í…ôrz m åst bi …ôÀàka änt…ôbl f…ôr √∞…õr d…™Ààs…™ í…ônz/",
        },
      };

      // ÏùåÏÑ± Ï¥àÍ∏∞Ìôî
      function initVoices() {
        voices = synth.getVoices();
        if (voices.length === 0) {
          synth.addEventListener("voiceschanged", () => {
            voices = synth.getVoices();
          });
        }
      }

      // ÏòÅÏñ¥ ÏùåÏÑ± Ï∞æÍ∏∞
      function getEnglishVoice() {
        return voices.find((voice) => voice.lang.startsWith("en")) || voices[0];
      }

      // ÌÖçÏä§Ìä∏ ÏùåÏÑ± Î≥ÄÌôò
      function speak(text, rate = 0.8) {
        if (!synth) return;

        const utterance = new SpeechSynthesisUtterance(text);
        const voice = getEnglishVoice();
        if (voice) utterance.voice = voice;
        utterance.rate = rate;
        utterance.pitch = 1;
        utterance.volume = 1;

        synth.speak(utterance);
      }

      // ÎßàÏù¥ÌÅ¨ Í∂åÌïú ÏöîÏ≤≠
      async function requestMicrophone() {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({
            audio: true,
          });
          microphoneGranted = true;
          document.getElementById("microphoneNotice").style.display = "none";
          showFeedback(
            "",
            "Microphone access granted! You can now use voice features.",
            "success"
          );
          stream.getTracks().forEach((track) => track.stop());
        } catch (error) {
          showFeedback(
            "",
            "Microphone access denied. Voice features will not work.",
            "error"
          );
        }
      }

      // Îã®Ïñ¥ Ïû¨ÏÉù
      function playWord(word) {
        if (wordData[word]) {
          speak(wordData[word].word, 0.7);
        }
      }

      // Î¨∏Ïû• Ïû¨ÏÉù
      function playSentence(word) {
        if (wordData[word]) {
          speak(wordData[word].sentence, 0.8);
        }
      }

      // Î™®Îì† Í≤É Ïû¨ÏÉù
      function playAll(word) {
        if (wordData[word]) {
          speak(wordData[word].word, 0.7);
          setTimeout(() => {
            speak(wordData[word].sentence, 0.8);
          }, 1500);
        }
      }

      // ÎÖπÏùå ÏãúÏûë/Ï§ëÏßÄ
      async function recordWord(word) {
        if (!microphoneGranted) {
          showFeedback(
            word,
            "Please allow microphone access first.",
            "warning"
          );
          return;
        }

        const button = event.target;

        if (!isRecording) {
          try {
            const stream = await navigator.mediaDevices.getUserMedia({
              audio: true,
            });
            mediaRecorder = new MediaRecorder(stream);
            audioChunks = [];

            mediaRecorder.ondataavailable = (event) => {
              audioChunks.push(event.data);
            };

            mediaRecorder.onstop = () => {
              const audioBlob = new Blob(audioChunks, { type: "audio/wav" });
              recordings[word] = audioBlob;
              showFeedback(word, "Recording saved successfully!", "success");
              button.textContent = "üéôÔ∏è Record";
              button.classList.remove("recording");
              stream.getTracks().forEach((track) => track.stop());
            };

            mediaRecorder.start();
            isRecording = true;
            button.textContent = "‚èπÔ∏è Stop";
            button.classList.add("recording");
            showFeedback(
              word,
              "Recording... Click stop when finished.",
              "warning"
            );
          } catch (error) {
            showFeedback(word, "Recording failed. Please try again.", "error");
          }
        } else {
          mediaRecorder.stop();
          isRecording = false;
        }
      }

      // ÏùåÏÑ± Ïù∏Ïãù Í∞ùÏ≤¥
      let recognition;
      let isListening = false;

      // ÏùåÏÑ± Ïù∏Ïãù Ï¥àÍ∏∞Ìôî
      function initSpeechRecognition() {
        if ("webkitSpeechRecognition" in window) {
          recognition = new webkitSpeechRecognition();
        } else if ("SpeechRecognition" in window) {
          recognition = new SpeechRecognition();
        } else {
          console.log("Speech recognition not supported");
          return false;
        }

        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.lang = "en-US";
        recognition.maxAlternatives = 1;

        return true;
      }

      // Îã®Ïñ¥ Î∞úÏùå Ï≤¥ÌÅ¨ (Ïã§Ï†ú ÏùåÏÑ± Ïù∏Ïãù)
      function checkWord(word) {
        if (!microphoneGranted) {
          showFeedback(
            word,
            "Please allow microphone access first.",
            "warning"
          );
          return;
        }

        if (!recognition) {
          if (!initSpeechRecognition()) {
            showFeedback(
              word,
              "Speech recognition not supported in this browser.",
              "error"
            );
            return;
          }
        }

        if (isListening) {
          showFeedback(word, "Already listening... Please wait.", "warning");
          return;
        }

        const targetWord = wordData[word].word.toLowerCase();
        const button = event.target;
        const originalText = button.textContent;

        button.textContent = "üé§ Listening...";
        button.disabled = true;
        isListening = true;

        showFeedback(
          word,
          `Say "${targetWord}" clearly into the microphone`,
          "warning"
        );

        recognition.onresult = function (event) {
          const spokenWord = event.results[0][0].transcript
            .toLowerCase()
            .trim();
          const confidence = event.results[0][0].confidence;

          // Îã®Ïñ¥ Ï†ïÌôïÎèÑ Í≥ÑÏÇ∞
          const accuracy = calculateWordAccuracy(
            targetWord,
            spokenWord,
            confidence
          );
          updateStats(accuracy);

          // ÏÉÅÏÑ∏ ÌîºÎìúÎ∞± ÏÉùÏÑ±
          const feedbackHtml = generateWordFeedback(
            targetWord,
            spokenWord,
            accuracy,
            confidence
          );

          if (accuracy >= 90) {
            showDetailedFeedback(word, feedbackHtml, "success");
          } else if (accuracy >= 75) {
            showDetailedFeedback(word, feedbackHtml, "warning");
          } else {
            showDetailedFeedback(word, feedbackHtml, "error");
          }

          resetButton();
        };

        recognition.onerror = function (event) {
          showFeedback(
            word,
            "Speech recognition error. Please try again.",
            "error"
          );
          resetButton();
        };

        recognition.onend = function () {
          resetButton();
        };

        function resetButton() {
          button.textContent = originalText;
          button.disabled = false;
          isListening = false;
        }

        try {
          recognition.start();
        } catch (error) {
          showFeedback(word, "Could not start speech recognition.", "error");
          resetButton();
        }
      }

      // Î¨∏Ïû• Î∞úÏùå Ï≤¥ÌÅ¨ (Ïã§Ï†ú ÏùåÏÑ± Ïù∏Ïãù)
      function checkSentence(word) {
        if (!microphoneGranted) {
          showFeedback(
            word,
            "Please allow microphone access first.",
            "warning"
          );
          return;
        }

        if (!recognition) {
          if (!initSpeechRecognition()) {
            showFeedback(
              word,
              "Speech recognition not supported in this browser.",
              "error"
            );
            return;
          }
        }

        if (isListening) {
          showFeedback(word, "Already listening... Please wait.", "warning");
          return;
        }

        const targetSentence = wordData[word].sentence.toLowerCase();
        const button = event.target;
        const originalText = button.textContent;

        button.textContent = "üé§ Listening...";
        button.disabled = true;
        isListening = true;

        showFeedback(word, "Say the complete sentence clearly", "warning");

        recognition.onresult = function (event) {
          const spokenSentence = event.results[0][0].transcript
            .toLowerCase()
            .trim();
          const confidence = event.results[0][0].confidence;

          // Î¨∏Ïû• Ï†ïÌôïÎèÑ Í≥ÑÏÇ∞
          const accuracy = calculateSentenceAccuracy(
            targetSentence,
            spokenSentence,
            confidence
          );
          updateStats(accuracy);

          // ÏÉÅÏÑ∏ ÌîºÎìúÎ∞± ÏÉùÏÑ±
          const feedbackHtml = generateSentenceFeedback(
            targetSentence,
            spokenSentence,
            accuracy,
            confidence
          );

          if (accuracy >= 85) {
            showDetailedFeedback(word, feedbackHtml, "success");
          } else if (accuracy >= 70) {
            showDetailedFeedback(word, feedbackHtml, "warning");
          } else {
            showDetailedFeedback(word, feedbackHtml, "error");
          }

          resetButton();
        };

        recognition.onerror = function (event) {
          showFeedback(
            word,
            "Speech recognition error. Please try again.",
            "error"
          );
          resetButton();
        };

        recognition.onend = function () {
          resetButton();
        };

        function resetButton() {
          button.textContent = originalText;
          button.disabled = false;
          isListening = false;
        }

        try {
          recognition.start();
        } catch (error) {
          showFeedback(word, "Could not start speech recognition.", "error");
          resetButton();
        }
      }

      // Îã®Ïñ¥ ÌîºÎìúÎ∞± ÏÉùÏÑ±
      function generateWordFeedback(target, spoken, accuracy, confidence) {
        const isCorrect = target === spoken;
        const status =
          accuracy >= 90
            ? "Excellent!"
            : accuracy >= 75
            ? "Good!"
            : "Try again!";

        return `
        <div><strong>${status} (${accuracy}%)</strong></div>
        <div class="speech-comparison">
          <div class="target-text">Target: "${target}"</div>
          <div class="spoken-text">You said: "${spoken}"</div>
          <div>
            ${
              isCorrect
                ? `<span class="word-match word-correct">‚úì Perfect match!</span>`
                : `<span class="word-match word-incorrect">‚úó Different word</span>`
            }
          </div>
          <div style="margin-top: 4px; font-size: 0.9em;">
            Recognition confidence: ${Math.round(confidence * 100)}%
          </div>
        </div>
      `;
      }

      // Î¨∏Ïû• ÌîºÎìúÎ∞± ÏÉùÏÑ±
      function generateSentenceFeedback(target, spoken, accuracy, confidence) {
        const targetWords = target.split(" ");
        const spokenWords = spoken.split(" ");
        const status =
          accuracy >= 85
            ? "Great sentence!"
            : accuracy >= 70
            ? "Good sentence!"
            : "Try again!";

        // Îã®Ïñ¥Î≥Ñ Îß§Ïπ≠ Î∂ÑÏÑù
        const comparisonHtml = generateWordByWordComparison(
          targetWords,
          spokenWords
        );

        return `
        <div><strong>${status} (${accuracy}%)</strong></div>
        <div class="speech-comparison">
          <div class="target-text">Target: "${target}"</div>
          <div class="spoken-text">You said: "${spoken}"</div>
          <div style="margin-top: 6px;">
            ${comparisonHtml}
          </div>
          <div style="margin-top: 4px; font-size: 0.9em;">
            Recognition confidence: ${Math.round(confidence * 100)}%
          </div>
        </div>
      `;
      }

      // Îã®Ïñ¥Î≥Ñ ÎπÑÍµê Î∂ÑÏÑù
      function generateWordByWordComparison(targetWords, spokenWords) {
        const maxLength = Math.max(targetWords.length, spokenWords.length);
        let comparisonHtml = "";

        for (let i = 0; i < maxLength; i++) {
          const targetWord = targetWords[i] || "";
          const spokenWord = spokenWords[i] || "";

          if (targetWord && spokenWord) {
            if (targetWord === spokenWord) {
              comparisonHtml += `<span class="word-match word-correct">${targetWord}</span>`;
            } else {
              comparisonHtml += `<span class="word-match word-incorrect">${spokenWord}</span>`;
            }
          } else if (targetWord && !spokenWord) {
            comparisonHtml += `<span class="word-match word-missing">(missing: ${targetWord})</span>`;
          } else if (!targetWord && spokenWord) {
            comparisonHtml += `<span class="word-match word-extra">(extra: ${spokenWord})</span>`;
          }
        }

        return comparisonHtml;
      }

      // ÏÉÅÏÑ∏ ÌîºÎìúÎ∞± ÌëúÏãú
      function showDetailedFeedback(word, htmlContent, type) {
        const feedbackElement = document.getElementById(`feedback-${word}`);
        if (feedbackElement) {
          feedbackElement.innerHTML = htmlContent;
          feedbackElement.className = `feedback ${type}`;
        }
      }

      // Îã®Ïñ¥ Ï†ïÌôïÎèÑ Í≥ÑÏÇ∞
      function calculateWordAccuracy(target, spoken, confidence) {
        if (target === spoken) {
          // ÏôÑÏ†ÑÌûà ÏùºÏπòÌïòÎ©¥ confidenceÍ∞Ä ÎÇÆÏïÑÎèÑ ÎÜíÏùÄ Ï†êÏàò Î∂ÄÏó¨
          return Math.max(Math.floor(confidence * 100), 85);
        }

        // Î†àÎ≤§ÏäàÌÉÄÏù∏ Í±∞Î¶¨Î•º ÏÇ¨Ïö©Ìïú Ïú†ÏÇ¨ÎèÑ Í≥ÑÏÇ∞
        const distance = levenshteinDistance(target, spoken);
        const maxLength = Math.max(target.length, spoken.length);
        const similarity = (maxLength - distance) / maxLength;

        // Ïú†ÏÇ¨ÎèÑÍ∞Ä ÎÜíÏúºÎ©¥ confidence Î≥¥Ï†ï
        if (similarity > 0.8) {
          return Math.floor(similarity * Math.max(confidence, 0.7) * 100);
        }

        return Math.floor(similarity * confidence * 100);
      }
      // Î¨∏Ïû• Ï†ïÌôïÎèÑ Í≥ÑÏÇ∞
      function calculateSentenceAccuracy(target, spoken, confidence) {
        const targetWords = target.split(" ");
        const spokenWords = spoken.split(" ");

        let matchCount = 0;
        const maxLength = Math.max(targetWords.length, spokenWords.length);

        for (
          let i = 0;
          i < Math.min(targetWords.length, spokenWords.length);
          i++
        ) {
          if (targetWords[i] === spokenWords[i]) {
            matchCount++;
          } else {
            // Î∂ÄÎ∂Ñ ÏùºÏπò Ï†êÏàò
            const wordSimilarity = calculateWordAccuracy(
              targetWords[i],
              spokenWords[i],
              1
            );
            matchCount += wordSimilarity / 100;
          }
        }

        const accuracy = (matchCount / maxLength) * confidence * 100;
        return Math.floor(Math.max(0, Math.min(100, accuracy)));
      }

      // Î†àÎ≤§ÏäàÌÉÄÏù∏ Í±∞Î¶¨ Í≥ÑÏÇ∞
      function levenshteinDistance(str1, str2) {
        const matrix = [];

        for (let i = 0; i <= str2.length; i++) {
          matrix[i] = [i];
        }

        for (let j = 0; j <= str1.length; j++) {
          matrix[0][j] = j;
        }

        for (let i = 1; i <= str2.length; i++) {
          for (let j = 1; j <= str1.length; j++) {
            if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
              matrix[i][j] = matrix[i - 1][j - 1];
            } else {
              matrix[i][j] = Math.min(
                matrix[i - 1][j - 1] + 1,
                matrix[i][j - 1] + 1,
                matrix[i - 1][j] + 1
              );
            }
          }
        }

        return matrix[str2.length][str1.length];
      }

      // ÌîºÎìúÎ∞± ÌëúÏãú
      function showFeedback(word, message, type) {
        const feedbackElement = document.getElementById(`feedback-${word}`);
        if (feedbackElement) {
          feedbackElement.textContent = message;
          feedbackElement.className = `feedback ${type}`;
        } else {
          // ÏùºÎ∞ò Î©îÏãúÏßÄÏùò Í≤ΩÏö∞
          const tempDiv = document.createElement("div");
          tempDiv.className = `feedback ${type}`;
          tempDiv.textContent = message;
          tempDiv.style.position = "fixed";
          tempDiv.style.top = "20px";
          tempDiv.style.right = "20px";
          tempDiv.style.padding = "10px 20px";
          tempDiv.style.borderRadius = "10px";
          tempDiv.style.backgroundColor =
            type === "success"
              ? "#48bb78"
              : type === "error"
              ? "#e53e3e"
              : "#d69e2e";
          tempDiv.style.color = "white";
          tempDiv.style.zIndex = "1000";
          document.body.appendChild(tempDiv);

          setTimeout(() => {
            document.body.removeChild(tempDiv);
          }, 3000);
        }
      }

      // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
      function updateStats(accuracy) {
        stats.wordsPracticed++;
        stats.totalAccuracy += accuracy;
        if (accuracy >= 90) stats.highAccuracyCount++;

        document.getElementById("wordsPracticed").textContent =
          stats.wordsPracticed;
        document.getElementById("averageAccuracy").textContent =
          Math.round(stats.totalAccuracy / stats.wordsPracticed) + "%";
        document.getElementById("highAccuracy").textContent =
          stats.highAccuracyCount;

        // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        const progress =
          (stats.wordsPracticed / Object.keys(wordData).length) * 100;
        document.getElementById("progressFill").style.width =
          Math.min(progress, 100) + "%";
      }

      // ÏûêÎèô Ïû¨ÏÉù ÌÜ†Í∏Ä
      function toggleAutoPlay() {
        autoPlay = !autoPlay;
        const button = document.getElementById("autoPlayBtn");
        button.textContent = autoPlay
          ? "üîä Auto Play: ON"
          : "üîä Auto Play: OFF";
      }

      // ÎÖπÏùå Îã§Ïö¥Î°úÎìú
      function downloadRecordings() {
        if (Object.keys(recordings).length === 0) {
          showFeedback("", "No recordings to download.", "warning");
          return;
        }

        Object.keys(recordings).forEach((word) => {
          const blob = recordings[word];
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.style.display = "none";
          a.href = url;
          a.download = `${word}_pronunciation.wav`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        });

        showFeedback("", "All recordings downloaded!", "success");
      }

      /// ÏßÑÌñâÎ•† Î¶¨ÏÖã
      function resetProgress() {
        if (confirm("Are you sure you want to reset all progress?")) {
          stats = {
            wordsPracticed: 0,
            totalAccuracy: 0,
            highAccuracyCount: 0,
          };
          recordings = {};

          document.getElementById("wordsPracticed").textContent = "0";
          document.getElementById("averageAccuracy").textContent = "0%";
          document.getElementById("highAccuracy").textContent = "0";
          document.getElementById("progressFill").style.width = "0%";

          // Î™®Îì† ÌîºÎìúÎ∞± Ï¥àÍ∏∞Ìôî
          Object.keys(wordData).forEach((word) => {
            const feedback = document.getElementById(`feedback-${word}`);
            if (feedback) feedback.textContent = "";
          });

          showFeedback("", "Progress reset successfully!", "success");
        }
      }
      // Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ± Ìï®Ïàò Ï∂îÍ∞Ä
      function generateReport() {
        // Î¶¨Ìè¨Ìä∏ Îç∞Ïù¥ÌÑ∞ ÏàòÏßë
        let reportContent = "Pronunciation Practice Report\n\n";
        reportContent += `Date: ${new Date().toLocaleString()}\n`;
        reportContent += `Words Practiced: ${stats.wordsPracticed}\n`;
        reportContent += `Average Accuracy: ${Math.round(
          stats.totalAccuracy / stats.wordsPracticed
        )}%\n`;
        reportContent += `Words with 90%+ Accuracy: ${stats.highAccuracyCount}\n\n`;
        reportContent += "Detailed Feedback:\n";

        // Í∞Å Îã®Ïñ¥Î≥Ñ ÌîºÎìúÎ∞± ÏàòÏßë
        Object.keys(wordData).forEach((word) => {
          const feedbackElement = document.getElementById(`feedback-${word}`);
          if (feedbackElement && feedbackElement.textContent.trim() !== "") {
            reportContent += `\nWord: ${word}\n`;
            reportContent += `Feedback: ${feedbackElement.textContent}\n`;
          }
        });

        // Î¶¨Ìè¨Ìä∏ Îã§Ïö¥Î°úÎìú
        const blob = new Blob([reportContent], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.style.display = "none";
        a.href = url;
        a.download = `pronunciation_report_${new Date()
          .toISOString()
          .slice(0, 10)}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        showFeedback("", "Report generated successfully!", "success");
      }
      // Ï¥àÍ∏∞Ìôî
      window.addEventListener("load", () => {
        initVoices();
        initSpeechRecognition();

        // ÏûêÎèô ÎßàÏù¥ÌÅ¨ Í∂åÌïú Ï≤¥ÌÅ¨
        navigator.mediaDevices
          .getUserMedia({ audio: true })
          .then((stream) => {
            microphoneGranted = true;
            document.getElementById("microphoneNotice").style.display = "none";
            stream.getTracks().forEach((track) => track.stop());
          })
          .catch(() => {
            // ÎßàÏù¥ÌÅ¨ Í∂åÌïúÏù¥ ÏóÜÏúºÎ©¥ ÏïåÎ¶º ÌëúÏãú
          });
      });

      // ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§
      document.addEventListener("keydown", (e) => {
        if (e.ctrlKey && e.key === "r") {
          e.preventDefault();
          resetProgress();
        } else if (e.ctrlKey && e.key === "d") {
          e.preventDefault();
          downloadRecordings();
        }
      });
    </script>
  </body>
</html>
