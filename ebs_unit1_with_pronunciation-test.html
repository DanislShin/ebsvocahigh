<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>EBS í•„ìˆ˜ ì˜ë‹¨ì–´ Unit 1 with Pronunciation Practice</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
      }
      .container {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        max-width: 1200px;
        margin: 0 auto;
      }
      h1 {
        text-align: center;
        color: #4a5568;
        margin-bottom: 30px;
        font-size: 2.5em;
        background: linear-gradient(45deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .microphone-notice {
        background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        padding: 15px;
        text-align: center;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      .microphone-notice button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1em;
        transition: transform 0.2s;
      }
      .microphone-notice button:hover {
        transform: translateY(-2px);
      }
      .stats {
        display: flex;
        justify-content: space-around;
        margin: 20px 0;
        text-align: center;
      }
      .stat-item {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        min-width: 120px;
      }
      .stat-item h3 {
        margin: 0 0 10px 0;
        color: #4a5568;
      }
      .stat-item p {
        margin: 0;
        font-size: 1.5em;
        font-weight: bold;
        color: #2d3748;
      }
      .controls {
        text-align: center;
        margin: 20px 0;
      }
      .controls button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 0 10px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1em;
        transition: transform 0.2s;
      }
      .controls button:hover {
        transform: translateY(-2px);
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      th,
      td {
        border: 1px solid #e2e8f0;
        padding: 12px;
        text-align: left;
      }
      th {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-weight: bold;
      }
      tr:nth-child(even) {
        background: #f8f9fa;
      }
      .word-cell {
        font-weight: bold;
        font-size: 1.1em;
        color: #2d3748;
      }
      .ipa-cell {
        font-family: "Courier New", monospace;
        color: #e53e3e;
      }
      .meaning-cell {
        color: #2b6cb0;
      }
      .example-cell {
        font-style: italic;
        color: #4a5568;
      }
      .translation-cell {
        color: #38a169;
      }
      .practice-cell {
        text-align: center;
      }
      .practice-btn {
        background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        color: white;
        border: none;
        padding: 6px 12px;
        margin: 2px;
        border-radius: 15px;
        cursor: pointer;
        font-size: 0.9em;
        transition: transform 0.2s;
      }
      .practice-btn:hover {
        transform: scale(1.05);
      }
      .record-btn {
        background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
      }
      .feedback {
        display: block;
        margin-top: 5px;
        font-size: 0.8em;
        font-weight: bold;
        min-height: 40px;
        padding: 5px;
        border-radius: 5px;
        background: #f8f9fa;
      }
      .feedback.success {
        color: #38a169;
        background: #e6fffa;
        border: 1px solid #38a169;
      }
      .feedback.error {
        color: #e53e3e;
        background: #fed7d7;
        border: 1px solid #e53e3e;
      }
      .feedback.warning {
        color: #d69e2e;
        background: #fefcbf;
        border: 1px solid #d69e2e;
      }
      .speech-comparison {
        margin-top: 8px;
        padding: 8px;
        background: #f7fafc;
        border-radius: 5px;
        border: 1px solid #e2e8f0;
        font-size: 0.75em;
      }
      .target-text {
        color: #2d3748;
        font-weight: bold;
        margin-bottom: 4px;
      }
      .spoken-text {
        color: #4a5568;
        margin-bottom: 4px;
      }
      .word-match {
        display: inline-block;
        padding: 2px 4px;
        margin: 1px;
        border-radius: 3px;
      }
      .word-correct {
        background: #c6f6d5;
        color: #22543d;
      }
      .word-incorrect {
        background: #fed7d7;
        color: #742a2a;
      }
      .word-missing {
        background: #fbb6ce;
        color: #702459;
      }
      .word-extra {
        background: #feebc8;
        color: #7b341e;
      }
      .speaker-icon {
        cursor: pointer;
        color: #4299e1;
        font-size: 1.2em;
      }
      .speaker-icon:hover {
        color: #2b6cb0;
      }
      .recording {
        background: linear-gradient(135deg, #fc8181 0%, #e53e3e 100%);
        animation: pulse 1s infinite;
      }
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }
      .progress-bar {
        width: 100%;
        height: 4px;
        background: #e2e8f0;
        border-radius: 2px;
        overflow: hidden;
        margin-top: 10px;
      }
      .progress-fill {
        height: 100%;
        background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        width: 0%;
        transition: width 0.3s ease;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>EBS í•„ìˆ˜ ì˜ë‹¨ì–´ Unit 1 with Pronunciation Practice</h1>

      <div class="microphone-notice" id="microphoneNotice">
        <h2>ğŸ¤ Microphone Access Required</h2>
        <p>
          Please allow microphone access for voice recording and recognition
          features.
        </p>
        <button onclick="requestMicrophone()">Allow Microphone Access</button>
        <p>
          â€» Voice data is not stored on any server and is processed only in your
          browser.
        </p>
      </div>

      <div class="stats">
        <div class="stat-item">
          <h3>Words Practiced</h3>
          <p id="wordsPracticed">0</p>
        </div>
        <div class="stat-item">
          <h3>Average Accuracy</h3>
          <p id="averageAccuracy">0%</p>
        </div>
        <div class="stat-item">
          <h3>90%+ Accuracy</h3>
          <p id="highAccuracy">0</p>
        </div>
      </div>

      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>

      <div class="controls">
        <button onclick="downloadRecordings()">
          ğŸ“¥ Download All Recordings
        </button>
        <button onclick="resetProgress()">ğŸ”„ Reset Progress</button>
        <button onclick="toggleAutoPlay()" id="autoPlayBtn">
          ğŸ”Š Auto Play: OFF
        </button>
        <button onclick="generateReport()">ğŸ“Š Generate Report</button>
      </div>

      <table>
        <tr>
          <th>Word</th>
          <th>IPA</th>
          <th>Part of Speech</th>
          <th>Meaning</th>
          <th>Example Sentence</th>
          <th>Translation</th>
          <th>IPA (Example)</th>
          <th>Practice</th>
        </tr>
        <tr>
          <td class="word-cell">
            abandon
            <span class="speaker-icon" onclick="playWord('abandon')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/É™ËˆbÃ¦ndÉ™n/</td>
          <td>Verb</td>
          <td class="meaning-cell">ë²„ë¦¬ë‹¤, ë‹¨ë…í•˜ë‹¤</td>
          <td class="example-cell">
            They abandoned the car and ran away.
            <span class="speaker-icon" onclick="playSentence('abandon')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">ê·¸ë“¤ì€ ì°¨ë¥¼ ë²„ë¦¬ê³  ë‹¬ì•„ë‚¬ë‹¤.</td>
          <td class="ipa-cell">/Ã°eÉª É™ËˆbÃ¦ndÉ™nd Ã°É™ kÉ‘Ër Ã¦nd rÃ¦n É™ËˆweÉª/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abandon')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abandon')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abandon')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abandon')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-abandon"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abolish
            <span class="speaker-icon" onclick="playWord('abolish')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/É™ËˆbÉ‘lÉªÊƒ/</td>
          <td>Verb</td>
          <td class="meaning-cell">íì§€í•˜ë‹¤</td>
          <td class="example-cell">
            He is in favor of abolishing the death penalty.
            <span class="speaker-icon" onclick="playSentence('abolish')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ê·¸ëŠ” ì‚¬í˜•ì œë¥¼ íì§€í•˜ëŠ” ê²ƒì— ì°¬ì„±í•œë‹¤.
          </td>
          <td class="ipa-cell">
            /hi Éªz Éªn ËˆfeÉªvÉ™r É™v É™ËˆbÉ‘lÉªÊƒÉªÅ‹ Ã°É™ dÉ›Î¸ ËˆpÉ›nÉ™lti/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abolish')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abolish')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abolish')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abolish')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-abolish"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abroad
            <span class="speaker-icon" onclick="playWord('abroad')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/É™ËˆbrÉ”Ëd/</td>
          <td>Adverb</td>
          <td class="meaning-cell">í•´ì™¸ì—ì„œ, ì™¸êµ­ì—ì„œ</td>
          <td class="example-cell">
            He hopes to work abroad next year.
            <span class="speaker-icon" onclick="playSentence('abroad')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ê·¸ëŠ” ë‚´ë…„ì— í•´ì™¸ì—ì„œ ê·¼ë¬´í•˜ê¸¸ í¬ë§í•œë‹¤.
          </td>
          <td class="ipa-cell">/hi hoÊŠps tÉ™ wÉœËrk É™ËˆbrÉ”Ëd nÉ›kst jÉªr/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abroad')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abroad')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abroad')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abroad')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-abroad"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abruptly
            <span class="speaker-icon" onclick="playWord('abruptly')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/É™ËˆbrÊŒptli/</td>
          <td>Adverb</td>
          <td class="meaning-cell">ê°‘ì‘ìŠ¤ëŸ½ê²Œ</td>
          <td class="example-cell">
            The land dropped off abruptly.
            <span class="speaker-icon" onclick="playSentence('abruptly')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">ë•…ì´ ê°‘ìê¸° í‘¹ êº¼ì¡Œë‹¤.</td>
          <td class="ipa-cell">/Ã°É™ lÃ¦nd drÉ‘Ëpt É”Ëf É™ËˆbrÊŒptli/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abruptly')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abruptly')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abruptly')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abruptly')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-abruptly"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            absence
            <span class="speaker-icon" onclick="playWord('absence')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/ËˆÃ¦bsÉ™ns/</td>
          <td>Noun</td>
          <td class="meaning-cell">ê²°ì„, ê²°ê·¼, ë¶€ì¬</td>
          <td class="example-cell">
            Mark will be in charge in my absence.
            <span class="speaker-icon" onclick="playSentence('absence')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ë‚´ê°€ ì—†ëŠ” ë™ì•ˆ Markê°€ ì±…ì„ì„ ë§¡ì„ ê²ƒì´ë‹¤.
          </td>
          <td class="ipa-cell">/mÉ‘Ërk wÉªl bi Éªn tÊƒÉ‘ËrdÊ’ Éªn maÉª ËˆÃ¦bsÉ™ns/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('absence')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('absence')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('absence')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('absence')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-absence"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            absolutely
            <span class="speaker-icon" onclick="playWord('absolutely')"
              >ğŸ”Š</span
            >
          </td>
          <td class="ipa-cell">/ËŒÃ¦bsÉ™ËˆluËtli/</td>
          <td>Adverb</td>
          <td class="meaning-cell">ì ˆëŒ€ì ìœ¼ë¡œ, ì „í˜€</td>
          <td class="example-cell">
            He has absolutely no experience in this field.
            <span class="speaker-icon" onclick="playSentence('absolutely')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">ê·¸ëŠ” ì´ ë¶„ì•¼ì— ì „í˜€ ê²½í—˜ì´ ì—†ë‹¤.</td>
          <td class="ipa-cell">
            /hi hÃ¦z ËŒÃ¦bsÉ™ËˆluËtli noÊŠ ÉªkËˆspÉªriÉ™ns Éªn Ã°Éªs fiËld/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('absolutely')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('absolutely')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('absolutely')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('absolutely')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-absolutely"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            absorb
            <span class="speaker-icon" onclick="playWord('absorb')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/É™bËˆzÉ”Ërb/</td>
          <td>Verb</td>
          <td class="meaning-cell">í¡ìˆ˜í•˜ë‹¤</td>
          <td class="example-cell">
            Plant roots absorb moisture.
            <span class="speaker-icon" onclick="playSentence('absorb')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">ì‹ë¬¼ì˜ ë¿Œë¦¬ëŠ” ìˆ˜ë¶„ì„ í¡ìˆ˜í•œë‹¤.</td>
          <td class="ipa-cell">/plÃ¦nt ruËts É™bËˆzÉ”Ërb ËˆmÉ”ÉªstÊƒÉ™r/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('absorb')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('absorb')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('absorb')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('absorb')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-absorb"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abstract
            <span class="speaker-icon" onclick="playWord('abstract')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/ËˆÃ¦bstrÃ¦kt/</td>
          <td>Adjective</td>
          <td class="meaning-cell">ì¶”ìƒì ì¸</td>
          <td class="example-cell">
            Human beings are capable of abstract thought.
            <span class="speaker-icon" onclick="playSentence('abstract')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">ì¸ê°„ì€ ì¶”ìƒì  ì‚¬ê³ ë¥¼ í•  ìˆ˜ ìˆë‹¤.</td>
          <td class="ipa-cell">
            /ËˆhjuËmÉ™n ËˆbiËÉªÅ‹z É‘Ër ËˆkeÉªpÉ™bl É™v ËˆÃ¦bstrÃ¦kt Î¸É”Ët/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abstract')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abstract')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abstract')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abstract')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-abstract"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abundant
            <span class="speaker-icon" onclick="playWord('abundant')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/É™ËˆbÊŒndÉ™nt/</td>
          <td>Adjective</td>
          <td class="meaning-cell">í’ë¶€í•œ</td>
          <td class="example-cell">
            Rainfall is abundant in the region.
            <span class="speaker-icon" onclick="playSentence('abundant')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">ê·¸ ì§€ì—­ì€ ê°•ìˆ˜ëŸ‰ì´ í’ë¶€í•˜ë‹¤.</td>
          <td class="ipa-cell">/ËˆreÉªnfÉ”Ël Éªz É™ËˆbÊŒndÉ™nt Éªn Ã°É™ ËˆriËdÊ’É™n/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abundant')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abundant')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abundant')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abundant')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-abundant"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            abuse
            <span class="speaker-icon" onclick="playWord('abuse')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/É™ËˆbjuËs/ (ëª…ì‚¬) /É™bËˆjuËz/ (ë™ì‚¬)</td>
          <td>Noun</td>
          <td class="meaning-cell">í•™ëŒ€, ë‚¨ìš©</td>
          <td class="example-cell">
            The boy was a victim of abuse.
            <span class="speaker-icon" onclick="playSentence('abuse')">ğŸ”Š</span>
          </td>
          <td class="translation-cell">ê·¸ ì†Œë…„ì€ í•™ëŒ€ì˜ í”¼í•´ìì˜€ë‹¤.</td>
          <td class="ipa-cell">/Ã°É™ bÉ”Éª wÉ™z É™ ËˆvÉªktÉªm É™v É™ËˆbjuËs/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('abuse')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('abuse')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('abuse')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('abuse')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-abuse"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accelerate
            <span class="speaker-icon" onclick="playWord('accelerate')"
              >ğŸ”Š</span
            >
          </td>
          <td class="ipa-cell">/É™kËˆselÉ™reÉªt/</td>
          <td>Verb</td>
          <td class="meaning-cell">ê°€ì†í•˜ë‹¤</td>
          <td class="example-cell">
            The car accelerated to a speed of 80 miles per hour.
            <span class="speaker-icon" onclick="playSentence('accelerate')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ê·¸ ì°¨ëŠ” ì‹œì† 80ë§ˆì¼ê¹Œì§€ ì†ë„ë¥¼ ë†’ì˜€ë‹¤.
          </td>
          <td class="ipa-cell">
            /Ã°É™ kÉ‘Ër É™kËˆselÉ™reÉªtÉªd tÉ™ É™ spiËd É™v ËˆeÉªti maÉªlz pÉ™r aÊŠÉ™r/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accelerate')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accelerate')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accelerate')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accelerate')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-accelerate"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accept
            <span class="speaker-icon" onclick="playWord('accept')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/É™kËˆsept/</td>
          <td>Verb</td>
          <td class="meaning-cell">ë°›ì•„ë“¤ì´ë‹¤, ìˆ˜ìš©í•˜ë‹¤</td>
          <td class="example-cell">
            They offered me a job and I accepted it.
            <span class="speaker-icon" onclick="playSentence('accept')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ê·¸ë“¤ì€ ë‚´ê²Œ ì¼ìë¦¬ë¥¼ ì œê³µí–ˆê³ , ë‚˜ëŠ” ê·¸ê²ƒì„ ìˆ˜ìš©í–ˆë‹¤.
          </td>
          <td class="ipa-cell">/Ã°eÉª ËˆÉ”ËfÉ™rd mi É™ dÊ’É‘Ëb Ã¦nd aÉª É™kËˆseptÉªd Éªt/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accept')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accept')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accept')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accept')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-accept"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            access
            <span class="speaker-icon" onclick="playWord('access')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/ËˆÃ¦kses/</td>
          <td>Noun</td>
          <td class="meaning-cell">ì ‘ì†, ì…ì¥</td>
          <td class="example-cell">
            We have Internet access at the library.
            <span class="speaker-icon" onclick="playSentence('access')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ìš°ë¦¬ëŠ” ë„ì„œê´€ì—ì„œ ì¸í„°ë„·ì— ì ‘ì†í•  ìˆ˜ ìˆë‹¤.
          </td>
          <td class="ipa-cell">/wi hÃ¦v ËˆÉªntÉ™rËŒnÉ›t ËˆÃ¦kses Ã¦t Ã°É™ ËˆlaÉªbrÉ›ri/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('access')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('access')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('access')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('access')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-access"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accidentally
            <span class="speaker-icon" onclick="playWord('accidentally')"
              >ğŸ”Š</span
            >
          </td>
          <td class="ipa-cell">/ËŒÃ¦ksÉ™ËˆdentÉ™li/</td>
          <td>Adverb</td>
          <td class="meaning-cell">ìš°ì—°íˆ, ì‹¤ìˆ˜ë¡œ</td>
          <td class="example-cell">
            They believe that the fire was started accidentally.
            <span class="speaker-icon" onclick="playSentence('accidentally')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ê·¸ í™”ì¬ëŠ” ìš°ë°œì ìœ¼ë¡œ ì‹œì‘ëœ ê²ƒìœ¼ë¡œ ë¯¿ê³  ìˆë‹¤.
          </td>
          <td class="ipa-cell">
            /Ã°eÉª bÉªËˆliËv Ã°Ã¦t Ã°É™ faÉªÉ™r wÉ™z ËˆstÉ‘ËrtÉªd ËŒÃ¦ksÉ™ËˆdentÉ™li/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accidentally')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accidentally')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accidentally')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button
              class="practice-btn"
              onclick="checkSentence('accidentally')"
            >
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-accidentally"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accommodate
            <span class="speaker-icon" onclick="playWord('accommodate')"
              >ğŸ”Š</span
            >
          </td>
          <td class="ipa-cell">/É™ËˆkÉ‘ËmÉ™deÉªt/</td>
          <td>Verb</td>
          <td class="meaning-cell">ìˆ˜ìš©í•˜ë‹¤</td>
          <td class="example-cell">
            The hotel can only accommodate about 100 people.
            <span class="speaker-icon" onclick="playSentence('accommodate')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ê·¸ í˜¸í…”ì€ ê²¨ìš° 100ëª… ì •ë„ë§Œ ìˆ˜ìš©í•  ìˆ˜ ìˆë‹¤.
          </td>
          <td class="ipa-cell">
            /Ã°É™ hoÊŠËˆtÉ›l kÃ¦n ËˆoÊŠnli É™ËˆkÉ‘ËmÉ™deÉªt É™ËˆbaÊŠt wÊŒn ËˆhÊŒndrÉ™d ËˆpiËpl/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accommodate')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accommodate')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accommodate')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accommodate')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-accommodate"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accompany
            <span class="speaker-icon" onclick="playWord('accompany')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/É™ËˆkÊŒmpÉ™ni/</td>
          <td>Verb</td>
          <td class="meaning-cell">ë™í–‰í•˜ë‹¤</td>
          <td class="example-cell">
            I want you to accompany her.
            <span class="speaker-icon" onclick="playSentence('accompany')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">ë‚œ ë„¤ê°€ ê·¸ë…€ì™€ í•¨ê»˜ ê°€ê¸¸ ë°”ë€ë‹¤.</td>
          <td class="ipa-cell">/aÉª wÉ‘Ënt ju tÉ™ É™ËˆkÊŒmpÉ™ni hÉ™r/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accompany')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accompany')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accompany')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accompany')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-accompany"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accomplish
            <span class="speaker-icon" onclick="playWord('accomplish')"
              >ğŸ”Š</span
            >
          </td>
          <td class="ipa-cell">/É™ËˆkÉ‘ËmplÉªÊƒ/</td>
          <td>Verb</td>
          <td class="meaning-cell">ë‹¬ì„±í•˜ë‹¤</td>
          <td class="example-cell">
            We have accomplished much in a short period of time.
            <span class="speaker-icon" onclick="playSentence('accomplish')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ìš°ë¦¬ëŠ” ì§§ì€ ì‹œê°„ì— ë§ì€ ê²ƒì„ ì´ë£¨ì—ˆë‹¤.
          </td>
          <td class="ipa-cell">
            /wi hÃ¦v É™ËˆkÉ‘ËmplÉªÊƒt mÊŒtÊƒ Éªn É™ ÊƒÉ”Ërt ËˆpÉªriÉ™d É™v taÉªm/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accomplish')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accomplish')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accomplish')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accomplish')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-accomplish"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            according to
            <span class="speaker-icon" onclick="playWord('according to')"
              >ğŸ”Š</span
            >
          </td>
          <td class="ipa-cell">/É™ËˆkÉ”ËrdÉªÅ‹ tuË/</td>
          <td>Preposition</td>
          <td class="meaning-cell">~ì— ë”°ë¥´ë©´</td>
          <td class="example-cell">
            According to the law, we had to pay a small fine.
            <span class="speaker-icon" onclick="playSentence('according to')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">ë²•ì— ë”°ë¼ ìš°ë¦¬ëŠ” ë²Œê¸ˆì„ ë‚´ì•¼ í–ˆë‹¤.</td>
          <td class="ipa-cell">
            /É™ËˆkÉ”ËrdÉªÅ‹ tÉ™ Ã°É™ lÉ”Ë wi hÃ¦d tÉ™ peÉª É™ smÉ”Ël faÉªn/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('according to')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('according to')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('according to')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button
              class="practice-btn"
              onclick="checkSentence('according to')"
            >
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-according to"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accordingly
            <span class="speaker-icon" onclick="playWord('accordingly')"
              >ğŸ”Š</span
            >
          </td>
          <td class="ipa-cell">/É™ËˆkÉ”ËrdÉªÅ‹li/</td>
          <td>Adverb</td>
          <td class="meaning-cell">ë”°ë¼ì„œ</td>
          <td class="example-cell">
            No complaint was made. Accordingly, they took no action.
            <span class="speaker-icon" onclick="playSentence('accordingly')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ë¶ˆí‰ì´ ì—†ì—ˆê¸°ì—, ê·¸ë“¤ì€ ì•„ë¬´ ì¡°ì¹˜ë„ ì·¨í•˜ì§€ ì•Šì•˜ë‹¤.
          </td>
          <td class="ipa-cell">
            /noÊŠ kÉ™mËˆpleÉªnt wÉ™z meÉªd É™ËˆkÉ”ËrdÉªÅ‹li Ã°eÉª tÊŠk noÊŠ ËˆÃ¦kÊƒÉ™n/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accordingly')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accordingly')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accordingly')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accordingly')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-accordingly"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            account for
            <span class="speaker-icon" onclick="playWord('account for')"
              >ğŸ”Š</span
            >
          </td>
          <td class="ipa-cell">/É™ËˆkaÊŠnt fÉ”Ër/</td>
          <td>Verb</td>
          <td class="meaning-cell">~ë¥¼ ì°¨ì§€í•˜ë‹¤, ì„¤ëª…í•˜ë‹¤</td>
          <td class="example-cell">
            African-Americans account for about 13% of the US population.
            <span class="speaker-icon" onclick="playSentence('account for')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            í‘ì¸ì€ ë¯¸êµ­ ì¸êµ¬ì˜ ì•½ 13%ë¥¼ ì°¨ì§€í•œë‹¤.
          </td>
          <td class="ipa-cell">
            /ËŒÃ¦frÉªkÉ™n É™ËˆmÉ›rÉªkÉ™nz É™ËˆkaÊŠnt fÉ™r É™ËˆbaÊŠt ËŒÎ¸ÉœËrËˆtiËn pÉ™rËˆsÉ›nt É™v Ã°É™
            juËˆÉ›s pÉ‘ËpjÉ™ËˆleÉªÊƒÉ™n/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('account for')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('account for')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('account for')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('account for')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-account for"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            account
            <span class="speaker-icon" onclick="playWord('account')">ğŸ”Š</span>
          </td>
          <td class="ipa-cell">/É™ËˆkaÊŠnt/</td>
          <td>Noun</td>
          <td class="meaning-cell">ì„¤ëª…, ì´ì•¼ê¸°, ê³„ì¢Œ</td>
          <td class="example-cell">
            He gave a brief account of what had happened.
            <span class="speaker-icon" onclick="playSentence('account')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ê·¸ëŠ” ë¬´ìŠ¨ ì¼ì´ ìˆì—ˆëŠ”ì§€ ê°„ë‹¨íˆ ì„¤ëª…í–ˆë‹¤.
          </td>
          <td class="ipa-cell">/hi geÉªv É™ briËf É™ËˆkaÊŠnt É™v wÊŒt hÃ¦d ËˆhÃ¦pÉ™nd/</td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('account')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('account')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('account')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('account')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-account"></span>
          </td>
        </tr>
        <tr>
          <td class="word-cell">
            accountable
            <span class="speaker-icon" onclick="playWord('accountable')"
              >ğŸ”Š</span
            >
          </td>
          <td class="ipa-cell">/É™ËˆkaÊŠntÉ™bl/</td>
          <td>Adjective</td>
          <td class="meaning-cell">ì±…ì„ì´ ìˆëŠ”</td>
          <td class="example-cell">
            Managers must be accountable for their decisions.
            <span class="speaker-icon" onclick="playSentence('accountable')"
              >ğŸ”Š</span
            >
          </td>
          <td class="translation-cell">
            ê´€ë¦¬ìë“¤ì€ ê·¸ë“¤ì˜ ê²°ì •ì— ì±…ì„ì„ ì ¸ì•¼ í•œë‹¤.
          </td>
          <td class="ipa-cell">
            /ËˆmÃ¦nÉªdÊ’É™rz mÊŒst bi É™ËˆkaÊŠntÉ™bl fÉ™r Ã°É›r dÉªËˆsÉªÊ’É™nz/
          </td>
          <td class="practice-cell">
            <button class="practice-btn" onclick="playAll('accountable')">
              â–¶ï¸ Play All</button
            ><br />
            <button
              class="practice-btn record-btn"
              onclick="recordWord('accountable')"
            >
              ğŸ™ï¸ Record</button
            ><br />
            <button class="practice-btn" onclick="checkWord('accountable')">
              ğŸ—£ï¸ Check Word</button
            ><br />
            <button class="practice-btn" onclick="checkSentence('accountable')">
              ğŸ—£ï¸ Check Sentence
            </button>
            <span class="feedback" id="feedback-accountable"></span>
          </td>
        </tr>
      </table>
    </div>

    <script>
      // ì „ì—­ ë³€ìˆ˜
      let mediaRecorder;
      let audioChunks = [];
      let isRecording = false;
      let microphoneGranted = false;
      let autoPlay = false;
      let recordings = {};
      let stats = {
        wordsPracticed: 0,
        totalAccuracy: 0,
        highAccuracyCount: 0,
      };

      // ìŒì„± í•©ì„± ì„¤ì •
      const synth = window.speechSynthesis;
      let voices = [];

      // ë‹¨ì–´ ë°ì´í„°
      const wordData = {
        abandon: {
          word: "abandon",
          ipa: "/É™ËˆbÃ¦ndÉ™n/",
          sentence: "They abandoned the car and ran away.",
          sentenceIPA: "/Ã°eÉª É™ËˆbÃ¦ndÉ™nd Ã°É™ kÉ‘Ër Ã¦nd rÃ¦n É™ËˆweÉª/",
        },
        abolish: {
          word: "abolish",
          ipa: "/É™ËˆbÉ‘lÉªÊƒ/",
          sentence: "He is in favor of abolishing the death penalty.",
          sentenceIPA: "/hi Éªz Éªn ËˆfeÉªvÉ™r É™v É™ËˆbÉ‘lÉªÊƒÉªÅ‹ Ã°É™ dÉ›Î¸ ËˆpÉ›nÉ™lti/",
        },
        abroad: {
          word: "abroad",
          ipa: "/É™ËˆbrÉ”Ëd/",
          sentence: "He hopes to work abroad next year.",
          sentenceIPA: "/hi hoÊŠps tÉ™ wÉœËrk É™ËˆbrÉ”Ëd nÉ›kst jÉªr/",
        },
        abruptly: {
          word: "abruptly",
          ipa: "/É™ËˆbrÊŒptli/",
          sentence: "The land dropped off abruptly.",
          sentenceIPA: "/Ã°É™ lÃ¦nd drÉ‘Ëpt É”Ëf É™ËˆbrÊŒptli/",
        },
        absence: {
          word: "absence",
          ipa: "/ËˆÃ¦bsÉ™ns/",
          sentence: "Mark will be in charge in my absence.",
          sentenceIPA: "/mÉ‘Ërk wÉªl bi Éªn tÊƒÉ‘ËrdÊ’ Éªn maÉª ËˆÃ¦bsÉ™ns/",
        },
        absolutely: {
          word: "absolutely",
          ipa: "/ËŒÃ¦bsÉ™ËˆluËtli/",
          sentence: "He has absolutely no experience in this field.",
          sentenceIPA: "/hi hÃ¦z ËŒÃ¦bsÉ™ËˆluËtli noÊŠ ÉªkËˆspÉªriÉ™ns Éªn Ã°Éªs fiËld/",
        },
        absorb: {
          word: "absorb",
          ipa: "/É™bËˆzÉ”Ërb/",
          sentence: "Plant roots absorb moisture.",
          sentenceIPA: "/plÃ¦nt ruËts É™bËˆzÉ”Ërb ËˆmÉ”ÉªstÊƒÉ™r/",
        },
        abstract: {
          word: "abstract",
          ipa: "/ËˆÃ¦bstrÃ¦kt/",
          sentence: "Human beings are capable of abstract thought.",
          sentenceIPA: "/ËˆhjuËmÉ™n ËˆbiËÉªÅ‹z É‘Ër ËˆkeÉªpÉ™bl É™v ËˆÃ¦bstrÃ¦kt Î¸É”Ët/",
        },
        abundant: {
          word: "abundant",
          ipa: "/É™ËˆbÊŒndÉ™nt/",
          sentence: "Rainfall is abundant in the region.",
          sentenceIPA: "/ËˆreÉªnfÉ”Ël Éªz É™ËˆbÊŒndÉ™nt Éªn Ã°É™ ËˆriËdÊ’É™n/",
        },
        abuse: {
          word: "abuse",
          ipa: "/É™ËˆbjuËs/",
          sentence: "The boy was a victim of abuse.",
          sentenceIPA: "/Ã°É™ bÉ”Éª wÉ™z É™ ËˆvÉªktÉªm É™v É™ËˆbjuËs/",
        },
        accelerate: {
          word: "accelerate",
          ipa: "/É™kËˆselÉ™reÉªt/",
          sentence: "The car accelerated to a speed of 80 miles per hour.",
          sentenceIPA:
            "/Ã°É™ kÉ‘Ër É™kËˆselÉ™reÉªtÉªd tÉ™ É™ spiËd É™v ËˆeÉªti maÉªlz pÉ™r aÊŠÉ™r/",
        },
        accept: {
          word: "accept",
          ipa: "/É™kËˆsept/",
          sentence: "They offered me a job and I accepted it.",
          sentenceIPA: "/Ã°eÉª ËˆÉ”ËfÉ™rd mi É™ dÊ’É‘Ëb Ã¦nd aÉª É™kËˆseptÉªd Éªt/",
        },
        access: {
          word: "access",
          ipa: "/ËˆÃ¦kses/",
          sentence: "We have Internet access at the library.",
          sentenceIPA: "/wi hÃ¦v ËˆÉªntÉ™rËŒnÉ›t ËˆÃ¦kses Ã¦t Ã°É™ ËˆlaÉªbrÉ›ri/",
        },
        accidentally: {
          word: "accidentally",
          ipa: "/ËŒÃ¦ksÉ™ËˆdentÉ™li/",
          sentence: "They believe that the fire was started accidentally.",
          sentenceIPA: "/Ã°eÉª bÉªËˆliËv Ã°Ã¦t Ã°É™ faÉªÉ™r wÉ™z ËˆstÉ‘ËrtÉªd ËŒÃ¦ksÉ™ËˆdentÉ™li/",
        },
        accommodate: {
          word: "accommodate",
          ipa: "/É™ËˆkÉ‘ËmÉ™deÉªt/",
          sentence: "The hotel can only accommodate about 100 people.",
          sentenceIPA:
            "/Ã°É™ hoÊŠËˆtÉ›l kÃ¦n ËˆoÊŠnli É™ËˆkÉ‘ËmÉ™deÉªt É™ËˆbaÊŠt wÊŒn ËˆhÊŒndrÉ™d ËˆpiËpl/",
        },
        accompany: {
          word: "accompany",
          ipa: "/É™ËˆkÊŒmpÉ™ni/",
          sentence: "I want you to accompany her.",
          sentenceIPA: "/aÉª wÉ‘Ënt ju tÉ™ É™ËˆkÊŒmpÉ™ni hÉ™r/",
        },
        accomplish: {
          word: "accomplish",
          ipa: "/É™ËˆkÉ‘ËmplÉªÊƒ/",
          sentence: "We have accomplished much in a short period of time.",
          sentenceIPA: "/wi hÃ¦v É™ËˆkÉ‘ËmplÉªÊƒt mÊŒtÊƒ Éªn É™ ÊƒÉ”Ërt ËˆpÉªriÉ™d É™v taÉªm/",
        },
        "according to": {
          word: "according to",
          ipa: "/É™ËˆkÉ”ËrdÉªÅ‹ tuË/",
          sentence: "According to the law, we had to pay a small fine.",
          sentenceIPA: "/É™ËˆkÉ”ËrdÉªÅ‹ tÉ™ Ã°É™ lÉ”Ë wi hÃ¦d tÉ™ peÉª É™ smÉ”Ël faÉªn/",
        },
        accordingly: {
          word: "accordingly",
          ipa: "/É™ËˆkÉ”ËrdÉªÅ‹li/",
          sentence: "No complaint was made. Accordingly, they took no action.",
          sentenceIPA:
            "/noÊŠ kÉ™mËˆpleÉªnt wÉ™z meÉªd É™ËˆkÉ”ËrdÉªÅ‹li Ã°eÉª tÊŠk noÊŠ ËˆÃ¦kÊƒÉ™n/",
        },
        "account for": {
          word: "account for",
          ipa: "/É™ËˆkaÊŠnt fÉ”Ër/",
          sentence:
            "African-Americans account for about 13% of the US population.",
          sentenceIPA:
            "/ËŒÃ¦frÉªkÉ™n É™ËˆmÉ›rÉªkÉ™nz É™ËˆkaÊŠnt fÉ™r É™ËˆbaÊŠt ËŒÎ¸ÉœËrËˆtiËn pÉ™rËˆsÉ›nt É™v Ã°É™ juËˆÉ›s pÉ‘ËpjÉ™ËˆleÉªÊƒÉ™n/",
        },
        account: {
          word: "account",
          ipa: "/É™ËˆkaÊŠnt/",
          sentence: "He gave a brief account of what had happened.",
          sentenceIPA: "/hi geÉªv É™ briËf É™ËˆkaÊŠnt É™v wÊŒt hÃ¦d ËˆhÃ¦pÉ™nd/",
        },
        accountable: {
          word: "accountable",
          ipa: "/É™ËˆkaÊŠntÉ™bl/",
          sentence: "Managers must be accountable for their decisions.",
          sentenceIPA: "/ËˆmÃ¦nÉªdÊ’É™rz mÊŒst bi É™ËˆkaÊŠntÉ™bl fÉ™r Ã°É›r dÉªËˆsÉªÊ’É™nz/",
        },
      };

      // ìŒì„± ì´ˆê¸°í™”
      function initVoices() {
        voices = synth.getVoices();
        if (voices.length === 0) {
          synth.addEventListener("voiceschanged", () => {
            voices = synth.getVoices();
          });
        }
      }

      // ì˜ì–´ ìŒì„± ì°¾ê¸°
      function getEnglishVoice() {
        return voices.find((voice) => voice.lang.startsWith("en")) || voices[0];
      }

      // í…ìŠ¤íŠ¸ ìŒì„± ë³€í™˜
      function speak(text, rate = 0.8) {
        if (!synth) return;

        const utterance = new SpeechSynthesisUtterance(text);
        const voice = getEnglishVoice();
        if (voice) utterance.voice = voice;
        utterance.rate = rate;
        utterance.pitch = 1;
        utterance.volume = 1;

        synth.speak(utterance);
      }

      // ë§ˆì´í¬ ê¶Œí•œ ìš”ì²­
      async function requestMicrophone() {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({
            audio: true,
          });
          microphoneGranted = true;
          document.getElementById("microphoneNotice").style.display = "none";
          showFeedback(
            "",
            "Microphone access granted! You can now use voice features.",
            "success"
          );
          stream.getTracks().forEach((track) => track.stop());
        } catch (error) {
          showFeedback(
            "",
            "Microphone access denied. Voice features will not work.",
            "error"
          );
        }
      }

      // ë‹¨ì–´ ì¬ìƒ
      function playWord(word) {
        if (wordData[word]) {
          speak(wordData[word].word, 0.7);
        }
      }

      // ë¬¸ì¥ ì¬ìƒ
      function playSentence(word) {
        if (wordData[word]) {
          speak(wordData[word].sentence, 0.8);
        }
      }

      // ëª¨ë“  ê²ƒ ì¬ìƒ
      function playAll(word) {
        if (wordData[word]) {
          speak(wordData[word].word, 0.7);
          setTimeout(() => {
            speak(wordData[word].sentence, 0.8);
          }, 1500);
        }
      }

      // ë…¹ìŒ ì‹œì‘/ì¤‘ì§€
      async function recordWord(word) {
        if (!microphoneGranted) {
          showFeedback(
            word,
            "Please allow microphone access first.",
            "warning"
          );
          return;
        }

        const button = event.target;

        if (!isRecording) {
          try {
            const stream = await navigator.mediaDevices.getUserMedia({
              audio: true,
            });
            mediaRecorder = new MediaRecorder(stream);
            audioChunks = [];

            mediaRecorder.ondataavailable = (event) => {
              audioChunks.push(event.data);
            };

            mediaRecorder.onstop = () => {
              const audioBlob = new Blob(audioChunks, { type: "audio/wav" });
              recordings[word] = audioBlob;
              showFeedback(word, "Recording saved successfully!", "success");
              button.textContent = "ğŸ™ï¸ Record";
              button.classList.remove("recording");
              stream.getTracks().forEach((track) => track.stop());
            };

            mediaRecorder.start();
            isRecording = true;
            button.textContent = "â¹ï¸ Stop";
            button.classList.add("recording");
            showFeedback(
              word,
              "Recording... Click stop when finished.",
              "warning"
            );
          } catch (error) {
            showFeedback(word, "Recording failed. Please try again.", "error");
          }
        } else {
          mediaRecorder.stop();
          isRecording = false;
        }
      }

      // ìŒì„± ì¸ì‹ ê°ì²´
      let recognition;
      let isListening = false;

      // ìŒì„± ì¸ì‹ ì´ˆê¸°í™”
      function initSpeechRecognition() {
        if ("webkitSpeechRecognition" in window) {
          recognition = new webkitSpeechRecognition();
        } else if ("SpeechRecognition" in window) {
          recognition = new SpeechRecognition();
        } else {
          console.log("Speech recognition not supported");
          return false;
        }

        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.lang = "en-US";
        recognition.maxAlternatives = 1;

        return true;
      }

      // ë‹¨ì–´ ë°œìŒ ì²´í¬ (ì‹¤ì œ ìŒì„± ì¸ì‹)
      function checkWord(word) {
        if (!microphoneGranted) {
          showFeedback(
            word,
            "Please allow microphone access first.",
            "warning"
          );
          return;
        }

        if (!recognition) {
          if (!initSpeechRecognition()) {
            showFeedback(
              word,
              "Speech recognition not supported in this browser.",
              "error"
            );
            return;
          }
        }

        if (isListening) {
          showFeedback(word, "Already listening... Please wait.", "warning");
          return;
        }

        const targetWord = wordData[word].word.toLowerCase();
        const button = event.target;
        const originalText = button.textContent;

        button.textContent = "ğŸ¤ Listening...";
        button.disabled = true;
        isListening = true;

        showFeedback(
          word,
          `Say "${targetWord}" clearly into the microphone`,
          "warning"
        );

        recognition.onresult = function (event) {
          const spokenWord = event.results[0][0].transcript
            .toLowerCase()
            .trim();
          const confidence = event.results[0][0].confidence;

          // ë‹¨ì–´ ì •í™•ë„ ê³„ì‚°
          const accuracy = calculateWordAccuracy(
            targetWord,
            spokenWord,
            confidence
          );
          updateStats(accuracy);

          // ìƒì„¸ í”¼ë“œë°± ìƒì„±
          const feedbackHtml = generateWordFeedback(
            targetWord,
            spokenWord,
            accuracy,
            confidence
          );

          if (accuracy >= 90) {
            showDetailedFeedback(word, feedbackHtml, "success");
          } else if (accuracy >= 75) {
            showDetailedFeedback(word, feedbackHtml, "warning");
          } else {
            showDetailedFeedback(word, feedbackHtml, "error");
          }

          resetButton();
        };

        recognition.onerror = function (event) {
          showFeedback(
            word,
            "Speech recognition error. Please try again.",
            "error"
          );
          resetButton();
        };

        recognition.onend = function () {
          resetButton();
        };

        function resetButton() {
          button.textContent = originalText;
          button.disabled = false;
          isListening = false;
        }

        try {
          recognition.start();
        } catch (error) {
          showFeedback(word, "Could not start speech recognition.", "error");
          resetButton();
        }
      }

      // ë¬¸ì¥ ë°œìŒ ì²´í¬ (ì‹¤ì œ ìŒì„± ì¸ì‹)
      function checkSentence(word) {
        if (!microphoneGranted) {
          showFeedback(
            word,
            "Please allow microphone access first.",
            "warning"
          );
          return;
        }

        if (!recognition) {
          if (!initSpeechRecognition()) {
            showFeedback(
              word,
              "Speech recognition not supported in this browser.",
              "error"
            );
            return;
          }
        }

        if (isListening) {
          showFeedback(word, "Already listening... Please wait.", "warning");
          return;
        }

        const targetSentence = wordData[word].sentence.toLowerCase();
        const button = event.target;
        const originalText = button.textContent;

        button.textContent = "ğŸ¤ Listening...";
        button.disabled = true;
        isListening = true;

        showFeedback(word, "Say the complete sentence clearly", "warning");

        recognition.onresult = function (event) {
          const spokenSentence = event.results[0][0].transcript
            .toLowerCase()
            .trim();
          const confidence = event.results[0][0].confidence;

          // ë¬¸ì¥ ì •í™•ë„ ê³„ì‚°
          const accuracy = calculateSentenceAccuracy(
            targetSentence,
            spokenSentence,
            confidence
          );
          updateStats(accuracy);

          // ìƒì„¸ í”¼ë“œë°± ìƒì„±
          const feedbackHtml = generateSentenceFeedback(
            targetSentence,
            spokenSentence,
            accuracy,
            confidence
          );

          if (accuracy >= 85) {
            showDetailedFeedback(word, feedbackHtml, "success");
          } else if (accuracy >= 70) {
            showDetailedFeedback(word, feedbackHtml, "warning");
          } else {
            showDetailedFeedback(word, feedbackHtml, "error");
          }

          resetButton();
        };

        recognition.onerror = function (event) {
          showFeedback(
            word,
            "Speech recognition error. Please try again.",
            "error"
          );
          resetButton();
        };

        recognition.onend = function () {
          resetButton();
        };

        function resetButton() {
          button.textContent = originalText;
          button.disabled = false;
          isListening = false;
        }

        try {
          recognition.start();
        } catch (error) {
          showFeedback(word, "Could not start speech recognition.", "error");
          resetButton();
        }
      }

      // ë‹¨ì–´ í”¼ë“œë°± ìƒì„±
      function generateWordFeedback(target, spoken, accuracy, confidence) {
        const isCorrect = target === spoken;
        const status =
          accuracy >= 90
            ? "Excellent!"
            : accuracy >= 75
            ? "Good!"
            : "Try again!";

        return `
        <div><strong>${status} (${accuracy}%)</strong></div>
        <div class="speech-comparison">
          <div class="target-text">Target: "${target}"</div>
          <div class="spoken-text">You said: "${spoken}"</div>
          <div>
            ${
              isCorrect
                ? `<span class="word-match word-correct">âœ“ Perfect match!</span>`
                : `<span class="word-match word-incorrect">âœ— Different word</span>`
            }
          </div>
          <div style="margin-top: 4px; font-size: 0.9em;">
            Recognition confidence: ${Math.round(confidence * 100)}%
          </div>
        </div>
      `;
      }

      // ë¬¸ì¥ í”¼ë“œë°± ìƒì„±
      function generateSentenceFeedback(target, spoken, accuracy, confidence) {
        const targetWords = target.split(" ");
        const spokenWords = spoken.split(" ");
        const status =
          accuracy >= 85
            ? "Great sentence!"
            : accuracy >= 70
            ? "Good sentence!"
            : "Try again!";

        // ë‹¨ì–´ë³„ ë§¤ì¹­ ë¶„ì„
        const comparisonHtml = generateWordByWordComparison(
          targetWords,
          spokenWords
        );

        return `
        <div><strong>${status} (${accuracy}%)</strong></div>
        <div class="speech-comparison">
          <div class="target-text">Target: "${target}"</div>
          <div class="spoken-text">You said: "${spoken}"</div>
          <div style="margin-top: 6px;">
            ${comparisonHtml}
          </div>
          <div style="margin-top: 4px; font-size: 0.9em;">
            Recognition confidence: ${Math.round(confidence * 100)}%
          </div>
        </div>
      `;
      }

      // ë‹¨ì–´ë³„ ë¹„êµ ë¶„ì„
      function generateWordByWordComparison(targetWords, spokenWords) {
        const maxLength = Math.max(targetWords.length, spokenWords.length);
        let comparisonHtml = "";

        for (let i = 0; i < maxLength; i++) {
          const targetWord = targetWords[i] || "";
          const spokenWord = spokenWords[i] || "";

          if (targetWord && spokenWord) {
            if (targetWord === spokenWord) {
              comparisonHtml += `<span class="word-match word-correct">${targetWord}</span>`;
            } else {
              comparisonHtml += `<span class="word-match word-incorrect">${spokenWord}</span>`;
            }
          } else if (targetWord && !spokenWord) {
            comparisonHtml += `<span class="word-match word-missing">(missing: ${targetWord})</span>`;
          } else if (!targetWord && spokenWord) {
            comparisonHtml += `<span class="word-match word-extra">(extra: ${spokenWord})</span>`;
          }
        }

        return comparisonHtml;
      }

      // ìƒì„¸ í”¼ë“œë°± í‘œì‹œ
      function showDetailedFeedback(word, htmlContent, type) {
        const feedbackElement = document.getElementById(`feedback-${word}`);
        if (feedbackElement) {
          feedbackElement.innerHTML = htmlContent;
          feedbackElement.className = `feedback ${type}`;
        }
      }

      // ë‹¨ì–´ ì •í™•ë„ ê³„ì‚°
      function calculateWordAccuracy(target, spoken, confidence) {
        if (target === spoken) {
          // ì™„ì „íˆ ì¼ì¹˜í•˜ë©´ confidenceê°€ ë‚®ì•„ë„ ë†’ì€ ì ìˆ˜ ë¶€ì—¬
          return Math.max(Math.floor(confidence * 100), 85);
        }

        // ë ˆë²¤ìŠˆíƒ€ì¸ ê±°ë¦¬ë¥¼ ì‚¬ìš©í•œ ìœ ì‚¬ë„ ê³„ì‚°
        const distance = levenshteinDistance(target, spoken);
        const maxLength = Math.max(target.length, spoken.length);
        const similarity = (maxLength - distance) / maxLength;

        // ìœ ì‚¬ë„ê°€ ë†’ìœ¼ë©´ confidence ë³´ì •
        if (similarity > 0.8) {
          return Math.floor(similarity * Math.max(confidence, 0.7) * 100);
        }

        return Math.floor(similarity * confidence * 100);
      }
      // ë¬¸ì¥ ì •í™•ë„ ê³„ì‚°
      function calculateSentenceAccuracy(target, spoken, confidence) {
        const targetWords = target.split(" ");
        const spokenWords = spoken.split(" ");

        let matchCount = 0;
        const maxLength = Math.max(targetWords.length, spokenWords.length);

        for (
          let i = 0;
          i < Math.min(targetWords.length, spokenWords.length);
          i++
        ) {
          if (targetWords[i] === spokenWords[i]) {
            matchCount++;
          } else {
            // ë¶€ë¶„ ì¼ì¹˜ ì ìˆ˜
            const wordSimilarity = calculateWordAccuracy(
              targetWords[i],
              spokenWords[i],
              1
            );
            matchCount += wordSimilarity / 100;
          }
        }

        const accuracy = (matchCount / maxLength) * confidence * 100;
        return Math.floor(Math.max(0, Math.min(100, accuracy)));
      }

      // ë ˆë²¤ìŠˆíƒ€ì¸ ê±°ë¦¬ ê³„ì‚°
      function levenshteinDistance(str1, str2) {
        const matrix = [];

        for (let i = 0; i <= str2.length; i++) {
          matrix[i] = [i];
        }

        for (let j = 0; j <= str1.length; j++) {
          matrix[0][j] = j;
        }

        for (let i = 1; i <= str2.length; i++) {
          for (let j = 1; j <= str1.length; j++) {
            if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
              matrix[i][j] = matrix[i - 1][j - 1];
            } else {
              matrix[i][j] = Math.min(
                matrix[i - 1][j - 1] + 1,
                matrix[i][j - 1] + 1,
                matrix[i - 1][j] + 1
              );
            }
          }
        }

        return matrix[str2.length][str1.length];
      }

      // í”¼ë“œë°± í‘œì‹œ
      function showFeedback(word, message, type) {
        const feedbackElement = document.getElementById(`feedback-${word}`);
        if (feedbackElement) {
          feedbackElement.textContent = message;
          feedbackElement.className = `feedback ${type}`;
        } else {
          // ì¼ë°˜ ë©”ì‹œì§€ì˜ ê²½ìš°
          const tempDiv = document.createElement("div");
          tempDiv.className = `feedback ${type}`;
          tempDiv.textContent = message;
          tempDiv.style.position = "fixed";
          tempDiv.style.top = "20px";
          tempDiv.style.right = "20px";
          tempDiv.style.padding = "10px 20px";
          tempDiv.style.borderRadius = "10px";
          tempDiv.style.backgroundColor =
            type === "success"
              ? "#48bb78"
              : type === "error"
              ? "#e53e3e"
              : "#d69e2e";
          tempDiv.style.color = "white";
          tempDiv.style.zIndex = "1000";
          document.body.appendChild(tempDiv);

          setTimeout(() => {
            document.body.removeChild(tempDiv);
          }, 3000);
        }
      }

      // í†µê³„ ì—…ë°ì´íŠ¸
      function updateStats(accuracy) {
        stats.wordsPracticed++;
        stats.totalAccuracy += accuracy;
        if (accuracy >= 90) stats.highAccuracyCount++;

        document.getElementById("wordsPracticed").textContent =
          stats.wordsPracticed;
        document.getElementById("averageAccuracy").textContent =
          Math.round(stats.totalAccuracy / stats.wordsPracticed) + "%";
        document.getElementById("highAccuracy").textContent =
          stats.highAccuracyCount;

        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        const progress =
          (stats.wordsPracticed / Object.keys(wordData).length) * 100;
        document.getElementById("progressFill").style.width =
          Math.min(progress, 100) + "%";
      }

      // ìë™ ì¬ìƒ í† ê¸€
      function toggleAutoPlay() {
        autoPlay = !autoPlay;
        const button = document.getElementById("autoPlayBtn");
        button.textContent = autoPlay
          ? "ğŸ”Š Auto Play: ON"
          : "ğŸ”Š Auto Play: OFF";
      }

      // ë…¹ìŒ ë‹¤ìš´ë¡œë“œ
      function downloadRecordings() {
        if (Object.keys(recordings).length === 0) {
          showFeedback("", "No recordings to download.", "warning");
          return;
        }

        Object.keys(recordings).forEach((word) => {
          const blob = recordings[word];
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.style.display = "none";
          a.href = url;
          a.download = `${word}_pronunciation.wav`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        });

        showFeedback("", "All recordings downloaded!", "success");
      }

      /// ì§„í–‰ë¥  ë¦¬ì…‹
      function resetProgress() {
        if (confirm("Are you sure you want to reset all progress?")) {
          stats = {
            wordsPracticed: 0,
            totalAccuracy: 0,
            highAccuracyCount: 0,
          };
          recordings = {};

          document.getElementById("wordsPracticed").textContent = "0";
          document.getElementById("averageAccuracy").textContent = "0%";
          document.getElementById("highAccuracy").textContent = "0";
          document.getElementById("progressFill").style.width = "0%";

          // ëª¨ë“  í”¼ë“œë°± ì´ˆê¸°í™”
          Object.keys(wordData).forEach((word) => {
            const feedback = document.getElementById(`feedback-${word}`);
            if (feedback) feedback.textContent = "";
          });

          showFeedback("", "Progress reset successfully!", "success");
        }
      }
      // ë¦¬í¬íŠ¸ ìƒì„± í•¨ìˆ˜ ì¶”ê°€
      function generateReport() {
        // ë¦¬í¬íŠ¸ ë°ì´í„° ìˆ˜ì§‘
        let reportContent = "Pronunciation Practice Report\n\n";
        reportContent += `Date: ${new Date().toLocaleString()}\n`;
        reportContent += `Words Practiced: ${stats.wordsPracticed}\n`;
        reportContent += `Average Accuracy: ${Math.round(
          stats.totalAccuracy / stats.wordsPracticed
        )}%\n`;
        reportContent += `Words with 90%+ Accuracy: ${stats.highAccuracyCount}\n\n`;
        reportContent += "Detailed Feedback:\n";

        // ê° ë‹¨ì–´ë³„ í”¼ë“œë°± ìˆ˜ì§‘
        Object.keys(wordData).forEach((word) => {
          const feedbackElement = document.getElementById(`feedback-${word}`);
          if (feedbackElement && feedbackElement.textContent.trim() !== "") {
            reportContent += `\nWord: ${word}\n`;
            reportContent += `Feedback: ${feedbackElement.textContent}\n`;
          }
        });

        // ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ
        const blob = new Blob([reportContent], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.style.display = "none";
        a.href = url;
        a.download = `pronunciation_report_${new Date()
          .toISOString()
          .slice(0, 10)}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        showFeedback("", "Report generated successfully!", "success");
      }
      // ì´ˆê¸°í™”
      window.addEventListener("load", () => {
        initVoices();
        initSpeechRecognition();

        // ìë™ ë§ˆì´í¬ ê¶Œí•œ ì²´í¬
        navigator.mediaDevices
          .getUserMedia({ audio: true })
          .then((stream) => {
            microphoneGranted = true;
            document.getElementById("microphoneNotice").style.display = "none";
            stream.getTracks().forEach((track) => track.stop());
          })
          .catch(() => {
            // ë§ˆì´í¬ ê¶Œí•œì´ ì—†ìœ¼ë©´ ì•Œë¦¼ í‘œì‹œ
          });
      });

      // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
      document.addEventListener("keydown", (e) => {
        if (e.ctrlKey && e.key === "r") {
          e.preventDefault();
          resetProgress();
        } else if (e.ctrlKey && e.key === "d") {
          e.preventDefault();
          downloadRecordings();
        }
      });
    </script>
  </body>
</html>
